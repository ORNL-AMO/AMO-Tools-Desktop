<div class="integration-container">
    <!-- show in item OWNER inventory  -->
    <div (click)="focusField('connected-item')" *ngIf="connectedInventoryData.isConnected" class="p-2 px-3">
        <div class="d-flex flex-row">
            <label class="w-50">
                <span class="integration-label">
                    Connected Inventory Item
                </span>
            </label>
            <div class="w-50 input-group justify-content-between">
                <div>
                    <a class="click-link connected-inventory p-1" (click)="goToInventory(connectedInventoryData.connectedItem)">
                        <span class="">{{connectedInventoryData.connectedItem.name}}</span>
                    </a>
                </div>
                <button class="btn btn-outline-danger p-1 px-2" (click)="disconnectInventory()"> 
                    <span class="fa fa-times pl-0 pr-2"></span>Disconnect
                </button>
            </div>
        </div>
    </div>

    <ng-container *ngIf="connectedItems && connectedItems.length > 0">
        <div *ngFor="let item of connectedItems" (click)="focusField('connected-owner-inventory')" class="p-2 px-3">
            <div class="d-flex flex-row">
                <label class="w-50">
                    <span class="integration-label">
                        Connected to Inventory Item
                    </span>
                </label>
                <div class="w-50 input-group justify-content-between">
                    <div>
                        <a class="click-link connected-inventory p-1" (click)="goToInventory(item)">
                            <span class="">{{item.name}}</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>

    <form (click)="focusField('select-item')" *ngIf="!connectedInventoryData.isConnected && selectOptions && selectOptions.inventoryOptions"
        [formGroup]="inventoryIntegrationForm">
        <label for="selectedInventoryId" class="integration-label">{{selectOptions.label}}</label>
        <div class="form-group">
            <label for="selectedInventoryId">Select Inventory</label>
            <select formControlName="selectedInventoryId" class="form-control" id="selectedInventoryId"
                (change)="setCatalogItemOptionsFromInventory()">
                <option *ngFor="let inventoryOption of selectOptions.inventoryOptions" [ngValue]="inventoryOption.id">
                    {{inventoryOption.display}}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="selectedCatalogItem">Select {{selectOptions.itemName}} Item</label>
            <select class="form-control" name="selectedCatalogItem" id="selectedCatalogItem"
                formControlName="selectedCatalogItem" (change)="setSelectedCatalogItem()">
                <option selected [ngValue]="null">Select {{selectOptions.itemName}} Item</option>
                <optgroup *ngFor="let option of selectOptions.catalogItemOptions" label="{{option.department}}">
                    <option *ngFor="let item of option.catalog" [ngValue]="item">{{item.name}}</option>
                </optgroup>
            </select>
        </div>
    </form>
</div>


<app-integration-status></app-integration-status>

