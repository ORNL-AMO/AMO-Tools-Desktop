<div class="explore-opportunities">
  <h2>Select Potential Adjustment Projects</h2>
  <p>Select potential adjustment projects to explore opportunities to increase efficiency and the effectiveness of your system.</p>
  <ul>
    <li>
      <div class="checkbox">
        <label for="general"><input type ="checkbox" id="general" value="true" (focus)="focusField('systemData')" (change)="toggleSystemData()" [(ngModel)]="showSystemData" />
								Adjust System Data
							</label>
      </div>
      <ul *ngIf="showSystemData">
        <li>
          <div class="checkbox">
            <label for="modifyCost"><input type ="checkbox" id="modifyCost" value="true" (focus)="focusField('modifyCost')" (change)="toggleCost()" [(ngModel)]="showCost"/>
										Modify Cost
									</label>
          </div>
          <form *ngIf="showCost">
            <div class="form-group">
              <label for="baselineCost">Baseline Cost</label>
              <div class="input-group">
                <input name="baselineCost" type="number" step="any" id="baselineCost" class="form-control" (focus)="focusField('modifyCost')"
                  (input)="calculate()" [(ngModel)]="psat.inputs.cost_kw_hour" [ngClass]="{'invalid': checkCost(1) == false}"
                />
                <span class="input-group-addon units">$/kWH</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="costError1 !== null">{{costError1}}</span>
            </div>
            <div class="form-group">
              <label for="modificationCost">Modification Cost</label>
              <div class="input-group">
                <input name="modificationCost" type="number" step="any" id="modificationCost" class="form-control" (focus)="focusField('modifyCost')"
                  [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.cost_kw_hour" (input)="calculate()" [ngClass]="{'invalid': checkCost(2) == false}"
                />
                <span class="input-group-addon units">$/kWh</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="costError2 !== null">{{costError2}}</span>
            </div>
          </form>
        </li>
        <li>
          <div class="checkbox">
            <label for="modifyFlowRate"><input type ="checkbox" id="modifyFlowRate" value="true" (focus)="focusField('flowRate')" (change)="toggleFlowRate()" [(ngModel)]="showFlowRate"/>
										Modify Flow Rate
									</label>
          </div>
          <form *ngIf="showFlowRate">
            <div class="form-group">
              <label for="baselineFlowRate">Baseline Flow Rate</label>
              <div class="input-group">
                <input name="baselineFlowRate" type="number" step="any" id="baselineFlowRate" class="form-control" (focus)="focusField('flowRate')"
                  (input)="calculate()" [(ngModel)]="psat.inputs.flow_rate" [ngClass]="{'invalid': checkFlowRate(1) == false}"
                />
                <span class="input-group-addon units">{{settings.flowMeasurement}}</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="flowRateError1 !== null">{{flowRateError1}}</span>
            </div>
            <div class="form-group">
              <label for="modificationFlowRate">Modification Flow Rate</label>
              <div class="input-group">
                <input name="modificationFlowRate" type="number" step="any" id="modificationFlowRate" class="form-control" (focus)="focusField('flowRate')"
                  [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.flow_rate" (input)="calculate()" [ngClass]="{'invalid': checkFlowRate(2) == false}"
                />
                <span class="input-group-addon units">{{settings.flowMeasurement}}</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="flowRateError2 !== null">{{flowRateError2}}</span>
            </div>
          </form>
        </li>
        <li>
          <div class="checkbox">
            <label for="modifyHead"><input type ="checkbox" id="modifyHead" value="true" (focus)="focusField('head')" (change)="toggleHead()" [(ngModel)]="showHead"/>
										Modify Head
									</label>
          </div>
          <form *ngIf="showHead">
            <div class="form-group">
              <label for="baselineHead">Baseline head</label>
              <div class="input-group">
                <input name="baselineHead" type="number" step="any" id="baselineHead" class="form-control" (focus)="focusField('head')" (input)="calculate()"
                  [(ngModel)]="psat.inputs.head" />
                <span class="input-group-addon units">{{settings.distanceMeasurement}}</span>
              </div>
            </div>
            <div class="form-group">
              <label for="modificationHead">Modification head</label>
              <div class="input-group">
                <input name="modificationHead" type="number" step="any" id="modificationHead" class="form-control" (focus)="focusField('head')"
                  (input)="calculate()" [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.head" />
                <span class="input-group-addon units">{{settings.distanceMeasurement}}</span>
              </div>
            </div>
          </form>
        </li>
        <li>
          <div class="checkbox">
            <label for="modifyOperatingFraction"><input type ="checkbox" id="modifyOperatingFraction" value="true" (focus)="focusField('operatingFraction')" (change)="toggleOperatingFraction()" [(ngModel)]="showOperatingFraction"/>
										Modify Operating Fraction
									</label>
          </div>
          <form *ngIf="showOperatingFraction">
            <div class="form-group">
              <label for="baselineOperatingFraction">Baseline operating fractiong</label>
              <input name="baselineOperatingFraction" type="number" step="any" id="baselineOperatingFraction" class="form-control" (focus)="focusField('operatingFraction')"
                (input)="calculate()" [(ngModel)]="psat.inputs.operating_fraction" [ngClass]="{'invalid': checkOpFraction(1) == false}"
              />
              <span class="alert-danger pull-right small" *ngIf="opFractionError1 !== null">{{opFractionError1}}</span>
            </div>
            <div class="form-group">
              <label for="modificationOperatingFraction">Modification operating fraction</label>
              <input name="modificationOperatingFraction" type="number" step="any" id="modificationOperatingFraction" class="form-control"
                (focus)="focusField('operatingFraction')" (input)="calculate()" [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.operating_fraction"
                [ngClass]="{'invalid': checkOpFraction(2) == false}" />
              <span class="alert-danger pull-right small" *ngIf="opFractionError2 !== null">{{opFractionError2}}</span>
            </div>
          </form>
        </li>
      </ul>
    </li>
    <li>
      <div class="checkbox">
        <label for="general2"><input type ="checkbox" id="general2" value="true" (focus)="focusField('motorRatedData')" (change)="toggleRatedMotorData()"  [(ngModel)]="showRatedMotorData" />
								Adjust Rated Motor Data
							</label>
      </div>
      <ul *ngIf="showRatedMotorData">
        <li>
          <div class="checkbox">
            <label for="modifyMotorRatedPower"><input type ="checkbox" id="modifyMotorRatedPower" value="true" (change)="toggleMotorRatedPower()" (focus)="focusField('motorRatedPower')" [(ngModel)]="showRatedMotorPower"/>
										Modify Rated Motor Power
									</label>
          </div>
          <form *ngIf="showRatedMotorPower">
            <div class="form-group">
              <label for="baselineMotorRatedPower">Baseline Rated Motor Power</label>
              <select name="baselineMotorRatedPower" class="form-control number-input-field" id="baselineMotorRatedPower" (focus)="focusField('motorRatedPower')"
                (change)="calculate()" [(ngModel)]="psat.inputs.motor_rated_power" [ngClass]="{'invalid': checkRatedPower(1) == false}">
											<option  *ngFor="let option of options" [ngValue]="option">{{option}} {{settings.powerMeasurement}}</option>
										</select>
              <span class="alert-danger pull-right small" *ngIf="ratedPowerError1 !== null">{{ratedPowerError1}}</span>

            </div>
            <div class="form-group">
              <label for="modificationMotorRatedPower">Modification Motor Rated Power</label>
              <select name="modificationMotorRatedPower" class="form-control number-input-field" id="modificationMotorRatedPower" (focus)="focusField('motorRatedPower')"
                (change)="calculate()" [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.motor_rated_power" [ngClass]="{'invalid': checkRatedPower(2) == false}"
                [disabled]="psat.modifications[exploreModIndex].psat.inputs.optimize_calculation">
											<option  *ngFor="let option2 of options" [ngValue]="option2">{{option2}} {{settings.powerMeasurement}}</option>
										</select>
              <span class="alert-danger pull-right small" *ngIf="ratedPowerError2 !== null && !psat.modifications[exploreModIndex].psat.inputs.optimize_calculation">{{ratedPowerError2}}</span>
            </div>
          </form>
        </li>
        <li>
          <div class="checkbox">
            <label for="modifyEfficiencyClass"><input type ="checkbox" id="modifyEfficiencyClass" value="true" (change)="toggleEfficiencyClass()" (focus)="focusField('efficiencyClass')" [(ngModel)]="showEfficiencyClass"/>
										Modify Efficiency Class
									</label>
          </div>
          <form *ngIf="showEfficiencyClass">
            <div class="form-group">
              <label for="oldEfficiencyClass">Baseline Efficiency Class</label>
              <select name="oldEfficiencyClass" class="form-control select-input-field" (change)="setEfficiencyClasses()" id="oldEfficiencyClass"
                (focus)="focusField('efficiencyClass')" [(ngModel)]="tmpBaselineEfficiencyClass">
      										<option *ngFor="let efficiencyClass of efficiencyClasses" [ngValue]="efficiencyClass">{{efficiencyClass}}</option>
    									</select>
            </div>
            <div class="form-group">
              <label for="modificationEfficiencyClass">Modification Efficiency Class</label>
              <select name="modificationEfficiencyClass" class="form-control select-input-field" id="modificationEfficiencyClass" (change)="setEfficiencyClasses()"
                (focus)="focusField('efficiencyClass')" [(ngModel)]="tmpModificationEfficiencyClass" [disabled]="psat.modifications[exploreModIndex].psat.inputs.optimize_calculation">
      										<option *ngFor="let efficiencyClass of efficiencyClasses" [ngValue]="efficiencyClass">{{efficiencyClass}}</option>
    									</select>
            </div>
          </form>
        </li>
        <li *ngIf="(tmpBaselineEfficiencyClass == 'Specified' || tmpModificationEfficiencyClass == 'Specified') && showEfficiencyClass">
          <div class="checkbox">
            <label for="modifyMotorEfficiency"><input type="checkbox" disabled="disabled" id="modifyMotorEfficiency" value="true" (change)="toggleMotorEfficiency()" (focus)="focusField('motorEfficiency')" [(ngModel)]="showMotorEfficiency"/>
										Modify Motor Specified Efficiency
									</label>
          </div>
          <form>
            <div class="form-group">
              <label for="baselineMotorEfficiency">Baseline Motor Efficiency</label>
              <div class="input-group">
                <input name="baselineMotorEfficiency" [disabled]="tmpBaselineEfficiencyClass != 'Specified'" type="number" step="any" id="baselineMotorEfficiency"
                  class="form-control" (focus)="focusField('motorEfficiency')" (input)="calculate()" [(ngModel)]="psat.inputs.efficiency"
                  [ngClass]="{'invalid': checkEfficiency(psat.inputs.efficiency, 1) == false}" />
                <span class="input-group-addon units">%</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="efficiencyError1 !== null">{{efficiencyError1}}</span>
            </div>
            <div class="form-group">
              <label for="modificationMotorEfficiency">Modification Motor Efficiency</label>
              <div class="input-group">
                <input name="modificationMotorEfficiency" [disabled]="tmpModificationEfficiencyClass != 'Specified' || psat.modifications[exploreModIndex].psat.inputs.optimize_calculation"
                  type="number" step="any" id="modificationMotorEfficiency" class="form-control" (focus)="focusField('motorEfficiency')"
                  [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.efficiency" [ngClass]="{'invalid': checkEfficiency(psat.modifications[exploreModIndex].psat.inputs.efficiency, 2) == false}"
                  (input)="calculate()" />
                <span class="input-group-addon units">%</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="efficiencyError2 !== null && !psat.modifications[exploreModIndex].psat.inputs.optimize_calculation">{{efficiencyError2}}</span>
            </div>
          </form>
        </li>
      </ul>
    </li>
    <li>
      <div class="checkbox">
        <label for="general3"><input type ="checkbox" id="general3" value="true" (focus)="focusField('pumpData')" (change)="togglePumpData()" [(ngModel)]="showPumpData" />
								Adjust Pump Data
							</label>
      </div>
      <ul *ngIf="showPumpData">
        <li>
          <div class="checkbox">
            <label for="modifyPumpType"><input type="checkbox" id="modifyPumpType" value="true" (focus)="focusField('pumpType')" (change)="togglePumpType()" [(ngModel)]="showPumpType"/>
										Modify Pump Type
									</label>
          </div>
          <form *ngIf="showPumpType">
            <div class="form-group">
              <label for="baselinePumpType">Baseline Pump Type</label>
              <select class="form-control" name="pumpType" id="pumpType" (change)="setPumpTypes()" (focus)="focusField('pumpType')" [(ngModel)]="tmpBaselinePumpType">
											<option *ngFor="let pumpType of pumpTypes" [ngValue]="pumpType">{{pumpType}}</option>
										</select>
            </div>
            <div class="form-group">
              <label for="modificationPumpType">Modification Pump Type</label>
              <select class="form-control" name="pumpType2" id="pumpType2" (change)="setPumpTypes()" (focus)="focusField('pumpType')" [(ngModel)]="tmpModificationPumpType">
											<option *ngFor="let pumpType2 of pumpTypes" [ngValue]="pumpType2">{{pumpType2}}</option>
										</select>
            </div>
          </form>
        </li>
        <li *ngIf="(tmpBaselinePumpType == 'Specified Optimal Efficiency' || tmpModificationPumpType == 'Specified Optimal Efficiency') && showPumpType">
          <div class="checkbox">
            <label for="modifyPumpSpecified"><input type="checkbox" disabled="disabled" id="modifyPumpSpecified" value="true" (focus)="focusField('pumpSpecified')" [(ngModel)]="showPumpSpecified"/>
										Modify Pump Specified Efficiency
									</label>
          </div>
          <form>
            <div class="form-group">
              <label for="baselinePumpSpecified">Baseline Pump Specified Efficiency</label>
              <div class="input-group">
                <input name="baselinePumpSpecified" [disabled]="tmpBaselinePumpType != 'Specified Optimal Efficiency'" type="number" step="any"
                  id="baselinePumpSpecified" class="form-control" (focus)="focusField('pumpSpecified')" (input)="calculate()"
                  [(ngModel)]="psat.inputs.pump_specified" [ngClass]="{'invalid': checkEfficiency(psat.inputs.pump_specified, 3) == false}"
                />
                <span class="input-group-addon units">%</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="specifiedError1 !== null">{{specifiedError1}}</span>
            </div>
            <div class="form-group">
              <label for="modificationPumpSpecified">Modification Pump Specified Efficiency</label>
              <div class="input-group">
                <input name="modificationPumpSpecified" [disabled]="tmpModificationPumpType != 'Specified Optimal Efficiency'" type="number"
                  step="any" id="modificationPumpSpecified" class="form-control" (focus)="focusField('pumpSpecified')" (input)="calculate()"
                  [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.pump_specified" [ngClass]="{'invalid': checkEfficiency(psat.modifications[exploreModIndex].psat.inputs.pump_specified, 4) == false}"
                />
                <span class="input-group-addon units">%</span>
              </div>
              <span class="alert-danger pull-right small" *ngIf="specifiedError2 !== null">{{specifiedError2}}</span>
            </div>
          </form>
        </li>
      </ul>
    </li>
    <li>
      <div class="checkbox">
        <label for="modifyCalculationMethod"><input type="checkbox" id="modifyCalculationMethod" value="true" (change)="calculate()" (focus)="focusField('modifyCalculationMethod')" [(ngModel)]="psat.modifications[exploreModIndex].psat.inputs.optimize_calculation"/>
										Optimize Pump and Motor combination, automatically
									</label>
      </div>
    </li>
  </ul>
</div>