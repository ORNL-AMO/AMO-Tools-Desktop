<div class="assessment-report report-in-compressed-air compressed-air"
    [ngClass]="{'assessment-report-padding': inAssessment, 'report-in-rollup': inRollup}">
    <div *ngIf="inAssessment" class="report-cover">
        <img src="assets/images/DOE-banner-color.svg" class="doe-logo">

        <div class="report-title">
            <h4>Compressed Air Efficiency Report:</h4>
            <h4>{{assessment.name}}</h4>
            <h5>{{createdDate| date:'short'}}</h5>
        </div>

        <p class="report-notes">{{reportNotes}}</p>
    </div>

    <div #reportHeader class="report-header d-none d-lg-block" [ngClass]="{'hide-print': inAssessment}">
        <h2 *ngIf="!assessment" class="assessment-name">Assessment Report</h2>
        <!-- Assessment view -->
        <div *ngIf="assessment && inAssessment" class="row">
            <div class="col-12 p-2">
                    <span class="pl-2" *ngFor="let directory of assessmentDirectories">
                        {{directory.name}} / {{assessment.name}}
                    </span>
                    <span class="ml-3 date-modified">Last Modified {{assessment.modifiedDate | date:'short'}}</span>
                    <button class="mt-0 btn btn-secondary pull-right hide-print" (click)="print()">Print</button>
            </div>
        </div>
        <!-- Rollup view -->
        <div *ngIf="assessment && !inAssessment" class="row assessment-name">
            <div class="col-12">
                <h2 class="assessment-title">
                    <div class="d-flex">
                        <span class="pl-2" *ngFor="let directory of assessmentDirectories">
                            {{directory.name}} /
                        </span>
                    </div>
                    {{assessment.name}}

                </h2>
            </div>
            <div class="col-12">
                <h2 class="date-modified">
                    <span>Last Modified {{assessment.modifiedDate | date:'short'}}</span>
                </h2>
            </div>
        </div>
    </div>
    <!-- End .report-header -->

    <div *ngIf="showPrintDiv && !inRollup" class="hide-print print-div row justify-content-center">
        <div class="col-12 print-col">
            <h4>Building Print View</h4>
            <h5>One Moment Please</h5>
            <span class="fa fa-print"></span>
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>
    </div>

    <div class="report-data" *ngIf="assessment.compressedAirAssessment && assessment.compressedAirAssessment.setupDone">


        <div class="d-none d-lg-flex">
            <ul #reportBtns class="tabs primary hide-print">
                <li (click)="setTab('executiveSummary')" [ngClass]="{'active': currentTab == 'executiveSummary'}">
                    <a>Executive Summary</a>
                </li>
                <li (click)="setTab('paybackPeriod')" [ngClass]="{'active': currentTab == 'paybackPeriod'}">
                    <a>Payback Details</a>
                </li>
                <li (click)="setTab('performanceProfile')" [ngClass]="{'active': currentTab == 'performanceProfile'}">
                    <a>Performance Profiles</a>
                </li>
                <li (click)="setTab('systemProfiles')" [ngClass]="{'active': currentTab == 'systemProfiles'}">
                    <a>System Profiles</a>
                </li>
                <li (click)="setTab('reportGraphs')" [ngClass]="{'active': currentTab == 'reportGraphs'}">
                    <a>Report Graphs</a>
                </li>
                <li (click)="setTab('reportSankey')" [ngClass]="{'active': currentTab == 'reportSankey'}">
                    <a>Sankey</a>
                </li>
                <li (click)="setTab('inputData')" [ngClass]="{'active': currentTab == 'inputData'}">
                    <a>Input Summary</a>
                </li>
                <li (click)="setTab('facilityInfo')" [ngClass]="{'active': currentTab == 'facilityInfo'}">
                    <a>Facility Info</a>
                </li>
            </ul>
        </div>

        <div class="d-flex d-lg-none flex-column">
            <div #reportBtns class="tabs primary hide-print">
                <div class="mx-auto pl-2 align-items-center justify-content-center" (click)="collapseTabs()">
                    <span *ngIf="!tabsCollapsed" class="fa fa-caret-up pr-2"></span>
                    <span *ngIf="tabsCollapsed" class="fa fa-caret-down pr-2"></span>
                    <span class="small text-uppercase">Menu</span>
                </div>
                <div (click)="setTab('executiveSummary')" [ngClass]="{'active': currentTab == 'executiveSummary', 'collapse': tabsCollapsed}">
                    <a>Executive Summary</a>
                </div>
                <div (click)="setTab('paybackPeriod')" [ngClass]="{'active': currentTab == 'paybackPeriod', 'collapse': tabsCollapsed}">
                    <a>Payback Details</a>
                </div>
                <div (click)="setTab('performanceProfile')" [ngClass]="{'active': currentTab == 'performanceProfile', 'collapse': tabsCollapsed}">
                    <a>Performance Profiles</a>
                </div>
                <div (click)="setTab('systemProfiles')" [ngClass]="{'active': currentTab == 'systemProfiles', 'collapse': tabsCollapsed}">
                    <a>System Profiles</a>
                </div>
                <div (click)="setTab('reportGraphs')" [ngClass]="{'active': currentTab == 'reportGraphs', 'collapse': tabsCollapsed}">
                    <a>Report Graphs</a>
                </div>
                <div (click)="setTab('reportSankey')" [ngClass]="{'active': currentTab == 'reportSankey', 'collapse': tabsCollapsed}">
                    <a>Sankey</a>
                </div>
                <div (click)="setTab('inputData')" [ngClass]="{'active': currentTab == 'inputData', 'collapse': tabsCollapsed}">
                    <a>Input Summary</a>
                </div>
                <div (click)="setTab('facilityInfo')" [ngClass]="{'active': currentTab == 'facilityInfo', 'collapse': tabsCollapsed}">
                    <a>Facility Info</a>
                </div>
                <div (click)="print()" class="hide-print"
                    [ngClass]="{'collapse': tabsCollapsed}">
                    <a>Print</a>
                </div>
            </div>
        </div>

        <div class="results scroll-item print-height page-break-before"
            *ngIf="currentTab == 'facilityInfo' || showPrintView" [ngStyle]="{'height.px':reportContainerHeight}">
            <app-facility-info-summary [assessment]="assessment"></app-facility-info-summary>
        </div>
        <div class="input-data results scroll-item print-height page-break-before"
            *ngIf="(currentTab == 'inputData' && !showPrintView) || (showPrintView && printOptions.printInputData)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-input-summary [compressedAirAssessment]="assessment.compressedAirAssessment" [settings]="settings"
                [printView]="showPrintView">
            </app-input-summary>
        </div>
        <div class="results scroll-item print-height page-break-before"
            *ngIf="(currentTab == 'executiveSummary' && !showPrintView) || (showPrintView && printOptions.printExecutiveSummary)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-executive-summary [baselineResults]="baselineResults" [combinedDayTypeResults]="combinedDayTypeResults"
                [modifications]="assessment.compressedAirAssessment.modifications" [inRollup]="inRollup"
                [assessment]="assessment" [settings]="settings"></app-executive-summary>
        </div>
        <div class="results scroll-item print-height page-break-before"
            *ngIf="(currentTab == 'reportGraphs' && !showPrintView) || (showPrintView && printOptions.printReportGraphs)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-report-graphs [assessmentResults]="assessmentResults" [combinedDayTypeResults]="combinedDayTypeResults"
                [compressedAirAssessment]="assessment.compressedAirAssessment" [printView]="showPrintView">
            </app-report-graphs>
        </div>
        <div class="results scroll-item print-height page-break-before"
            *ngIf="(currentTab == 'reportSankey' && !showPrintView) || (showPrintView && printOptions.printReportSankey)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-compressed-air-sankey [inReport]="true" [assessment]="assessment"></app-compressed-air-sankey>
        </div>
        <div class="print-height page-break-before" [ngClass]="{'results scroll-item':!showPrintView}"
            *ngIf="(currentTab == 'systemProfiles' && !showPrintView) || (showPrintView && printOptions.printSystemProfiles)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-system-profiles [printView]="showPrintView" [compressedAirAssessment]="assessment.compressedAirAssessment"
                [baselineProfileSummaries]="baselineProfileSummaries" [assessmentResults]="assessmentResults"
                [settings]="settings">
            </app-system-profiles>
            <app-system-profile-graphs [printView]="showPrintView"></app-system-profile-graphs>
        </div>
        <div class="results scroll-item print-height page-break-before"
            *ngIf="(currentTab == 'paybackPeriod' && !showPrintView) || (showPrintView && printOptions.printReportOpportunityPayback)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-payback-period [combinedDayTypeResults]="combinedDayTypeResults"></app-payback-period>
        </div>
        <div class="results scroll-item print-height page-break-before" 
            *ngIf="(currentTab == 'performanceProfile' && !showPrintView) || (showPrintView && printOptions.printPerformanceProfiles)"
            [ngStyle]="{'height.px':reportContainerHeight}">
            <app-performance-profiles [inReport]="true" [printView]="showPrintView" [compressedAirAssessment]="assessment.compressedAirAssessment" [settings]="settings">
            </app-performance-profiles>
        </div>
    </div>
    <!-- End .report-data -->

    <div *ngIf="!assessment.compressedAirAssessment.setupDone">
        <p class="alert-warning text-center">This assessment has not been completed, please complete this assessment to
            see the resulting data.</p>
    </div>


</div>

<app-print-options-menu *ngIf="showPrintMenu"></app-print-options-menu>