<div class="d-flex flex-column panel-container">
    <div class="header mr-2 ml-2">
        <h3>End Uses</h3>
        <br>
    </div>
    <div class="p-3 no-data" *ngIf="!hasEndUses">
        <h3>Add End Use</h3>
        <button type="button" class="btn btn-primary active" (click)="addEndUse()">+Add End Use</button>
    </div>
    <div class="mr-2 ml-2" *ngIf="hasEndUses">
        <form [formGroup]="form">
            <div class="form-group">
                <label for="dayType">Day Type</label>
                <select id="dayType" name="dayType" formControlName="dayType" (change)="save()"
                    (focus)="focusField('dayType')" class="form-control">
                    <option *ngFor="let dayTypeOption of dayTypeOptions" [ngValue]="dayTypeOption.dayTypeId">
                        {{dayTypeOption.name}}</option>
                </select>
            </div>

            <div class="form-group" [ngClass]="{'invalid': form.controls.dayTypeLeakRate.invalid}">
                <label for="dayTypeLeakRate">Day Type Leak Rate</label>
                <div class="input-group">
                    <input name="dayTypeLeakRate" type="number" step="any" class="form-control" id="dayTypeLeakRate"
                        formControlName="dayTypeLeakRate" (input)="save()" (focus)="focusField('dayTypeLeakRate')">
                    <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="units input-group-addon">acfm</span>
                    <span *ngIf="settings.unitsOfMeasure == 'Metric'"
                        class="units input-group-addon">m<sup>3</sup>/min</span>
                </div>
            </div>

            <div class="form-group">
                <label for="name">End Use Name</label>
                <input type="text" class="form-control" name="endUseName" formControlName="endUseName"
                    (focus)="focusField('endUseName')" (input)="save()" />
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea class="form-control" type="text" id="endUseDescription" formControlName="endUseDescription"
                    (focus)="focusField('endUseDescription')" (input)="save()"></textarea>
            </div>



            <div class="form-group" [ngClass]="{'invalid': form.controls.location.invalid}">
                <label for="location">Location</label>
                <div class="input-group">
                    <input name="location" type="number" step="any" class="form-control" id="location"
                        formControlName="location" (input)="save()" (focus)="focusField('location')">
                </div>
            </div>

            <div class="form-group" [ngClass]="{'invalid': form.controls.averageAirflow.invalid}">
                <label for="averageAirflow">Average Airflow</label>
                <div class="input-group">
                    <input name="averageAirflow" type="number" step="any" class="form-control" id="averageAirflow"
                        formControlName="averageAirflow" (input)="save()" (focus)="focusField('averageAirflow')">
                    <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="units input-group-addon">acfm</span>
                    <span *ngIf="settings.unitsOfMeasure == 'Metric'"
                        class="units input-group-addon">m<sup>3</sup>/min</span>
                </div>
            </div>

            <div class="form-group" [ngClass]="{'invalid': form.controls.averageCapacity.invalid}">
                <label for="averageCapacity">Average Percent Capacity</label>
                <div class="input-group">
                    <input name="averageCapacity" type="number" step="any" class="form-control"
                        id="averageCapacity" formControlName="averageCapacity" (input)="save()"
                        (focus)="focusField('averageCapacity')">
                </div>
            </div>


            <div class="form-group">
                <label for="regulated">Regulated</label>
                <select id="regulated" name="regulated" formControlName="regulated" (change)="save()"
                    (focus)="focusField('regulated')" class="form-control">
                    <option [ngValue]="true">Yes</option>
                    <option [ngValue]="false">No</option>
                </select>
            </div>

            <div class="form-group" [ngClass]="{'invalid': form.controls.requiredPressure.invalid}">
                <label for="requiredPressure">Required Pressure</label>
                <div class="input-group">
                    <input name="requiredPressure" type="number" step="any" class="form-control" id="requiredPressure"
                        formControlName="requiredPressure" (input)="save()" (focus)="focusField('requiredPressure')">
                    <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="units input-group-addon">psig</span>
                    <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="units input-group-addon">barg</span>
                </div>
            </div>

            <div class="form-group" [ngClass]="{'invalid': form.controls.measuredPressure.invalid}">
                <label for="measuredPressure">Measured Pressure</label>
                <div class="input-group">
                    <input name="measuredPressure" type="number" step="any" class="form-control" id="measuredPressure"
                        formControlName="measuredPressure" (input)="save()" (focus)="focusField('measuredPressure')">
                    <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="units input-group-addon">psig</span>
                    <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="units input-group-addon">barg</span>
                </div>
            </div>


            <div class="form-group" [ngClass]="{'invalid': form.controls.excessPressure.invalid}">
                <label for="excessPressure">Excess Pressure</label>
                <div class="input-group">
                    <input name="excessPressure" type="number" step="any" class="form-control" id="excessPressure"
                        formControlName="excessPressure" (input)="save()" (focus)="focusField('excessPressure')">
                    <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="units input-group-addon">psig</span>
                    <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="units input-group-addon">barg</span>
                </div>
            </div>

        </form>

    </div>
</div>