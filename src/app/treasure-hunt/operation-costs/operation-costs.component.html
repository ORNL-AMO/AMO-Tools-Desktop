<div class="d-flex flex-column mb-3" #formElement>
  <div class="header mr-2 ml-2">
    <h3>Annual Utility Usage and Costs</h3>
  </div>
  <div class="p-2 card-form">
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.electricity.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.electricityUsed"
          (click)="toggleElectricityUsed()" *ngIf = "!treasureHuntResults.electricity.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleElectricityUsed()">
          Electricity
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.electricityUsed == true">
          <label for="electricityCost">Electricity Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('electricity', 'unit_costs')">Estimate Electricity Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorElectricityUnitCosts">Please fill out <b>{{electricityFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input name="electricityCost" type="number" step="0.01" class="form-control" id="electricityCost"
              [(ngModel)]="settings.electricityCost" (input)="checkForm('electricity'); updateErrorText('electricity', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon">$/kWh</span>
          </div>
        </div>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.electricityUsed == true">
          <label for="annualElectricityUsage">Electricity Annual Consumption
            <a class="form-text small click-link" (click)="calculateValue('electricity', 'annual_consumption')">Estimate Electricity Annual Consumption</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorElectricityAnnualConsumption">Please fill out <b>{{electricityFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input class="form-control" name="annualElectricityUsage" type="number" step="100" (focus)="focusField('operation-costs')" 
              [(ngModel)]="treasureHunt.currentEnergyUsage.electricityUsage" (input)="checkForm('electricity'); updateErrorText('electricity', 'annual_consumption')">
            <span class="input-group-addon units">kWh</span>
          </div>
        </div>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.electricityUsed == true">
          <label for="annualElectricityCosts">Electricity Annual Costs
            <a class="form-text small click-link" (click)="calculateValue('electricity', 'annual_costs')">Estimate Electricity Annual Costs</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorElectricityAnnualCosts">Please fill out <b>{{electricityFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input class="form-control" name="annualElectricityCosts" type="number" step="100" (focus)="focusField('operation-costs')"
              [(ngModel)]="treasureHunt.currentEnergyUsage.electricityCosts" (input)="checkForm('electricity'); updateErrorText('electricity', 'annual_costs')">
            <span class="input-group-addon units">$</span>
          </div>
        </div>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.electricityUsed == true">
          <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate
            <a class="form-text small click-link" (click)="showZipCodeModal()">
              Calculate Emission Output Rate from zip code</a>
          </label>
          <div class="input-group">
            <input name="totalEmissionOutputRate" type="number" step="0.01" class="form-control"
              id="totalEmissionOutputRate" (input)="save()" (focus)="focusField('totalEmissionOutputRate')"
              [(ngModel)]="treasureHunt.currentEnergyUsage.electricityCO2SavingsData.totalEmissionOutputRate">
            <span class="input-group-addon units small">kg CO<sub>2</sub>/kWh</span>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.naturalGas.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.naturalGasUsed"
          (click)="toggleNaturalGasUsed()" *ngIf = "!treasureHuntResults.naturalGas.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleNaturalGasUsed()">
          Natural Gas
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.naturalGasUsed == true">
          <label for="fuelCost">Natural Gas Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('naturalGas', 'unit_costs')">Estimate Natural Gas Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorNaturalGasUnitCosts">Please fill out <b>{{naturalGasFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input name="fuelCost" type="number" class="form-control" id="fuelCost"
              [(ngModel)]="settings.fuelCost" (input)="checkForm('naturalGas'); updateErrorText('naturalGas', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/MMBtu</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/GJ</span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.naturalGasUsed == true">
            <label for="annualNaturalGasUsage">Natural Gas Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('naturalGas', 'annual_consumption')">Estimate Natural Gas Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorNaturalGasAnnualConsumption">Please fill out <b>{{naturalGasFormErrorText}}</b> before making an estimate.</span>
              </label>
            <div class="input-group">
              <input class="form-control" name="annualNaturalGasUsage" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.naturalGasUsage" (input)="checkForm('naturalGas'); updateErrorText('naturalGas', 'annual_consumption')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">GJ</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.naturalGasUsed == true">
            <label for="annualNaturalGasCosts">Natural Gas Annual Costs
              <a class="form-text small click-link" (click)="calculateValue('naturalGas', 'annual_costs')">Estimate Natural Gas Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorNaturalGasAnnualCosts">Please fill out <b>{{naturalGasFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualNaturalGasCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.naturalGasCosts" (input)="checkForm('naturalGas'); updateErrorText('naturalGas', 'annual_costs')">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.naturalGasUsed == true">
            <label for="totalEmissionOutputRate">Total Emission Output Rate</label>
            <div class="input-group">
              <input class="form-control" name="totalEmissionOutputRate" type="number" (focus)="focusField('totalEmissionOutputRate')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.naturalGasCO2SavingsData.totalEmissionOutputRate" (input)="save()">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/MMBtu</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/GJ</span>
            </div>
          </div>
        </div>
    </div>
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.otherFuel.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.otherFuelUsed"
          (click)="toggleOtherFuelUsed()" *ngIf = "!treasureHuntResults.otherFuel.energySavings" >
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleOtherFuelUsed()">
          Other Fuel
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.otherFuelUsed == true">
          <label for="otherFuelCost">Other Fuel Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('otherFuel', 'unit_costs')">Estimate Other Fuel Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorOtherFuelUnitCosts">Please fill out <b>{{otherFuelFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input type="number" step="0.01" class="form-control" [(ngModel)]="settings.otherFuelCost" id="otherFuelCost"
              (input)="checkForm('otherFuel'); updateErrorText('otherFuel', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/MMBtu</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/GJ</span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.otherFuelUsed == true">
            <label for="annualOtherFuelUsage">Other Fuel Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('otherFuel', 'annual_consumption')">Estimate Other Fuel Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorOtherFuelAnnualConsumption">Please fill out <b>{{otherFuelFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualOtherFuelUsage" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.otherFuelUsage" (input)="checkForm('otherFuel'); updateErrorText('otherFuel', 'annual_consumption')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">GJ</span>
            </div>
          </div>
          <div class="form-group"  *ngIf="treasureHunt.currentEnergyUsage.otherFuelUsed == true">
            <label for="annualOtherFuelCosts">Other Fuel Annual Costs
              <a class="form-text small click-link" (click)="calculateValue('otherFuel', 'annual_costs')">Estimate Other Fuel Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorOtherFuelAnnualCosts">Please fill out <b>{{otherFuelFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualOtherFuelCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.otherFuelCosts" (input)="checkForm('otherFuel'); updateErrorText('otherFuel', 'annual_costs')">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group"  *ngIf="treasureHunt.currentEnergyUsage.otherFuelUsed == true">
            <label for="energySource">Energy Source</label>
            <div class="input-group">
              <select name="energySource" class="form-control" id="energySource" (focus)="focusField('energySource')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.otherFuelCO2SavingsData.energySource" (change)="setEnergySource()">
                <option *ngFor="let option of otherFuels" [ngValue]="option.energySource">{{option.energySource}}</option>
              </select>
            </div>
          </div>
          <div class="form-group" *ngIf="!usingMixedCO2 && treasureHunt.currentEnergyUsage.otherFuelUsed == true">
            <label for="fuelType">Fuel Type</label>
            <div class="input-group">
              <select name="fuelType" class="form-control" id="fuelType" (focus)="focusField('fuelType')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.otherFuelCO2SavingsData.fuelType" (change)="setFuel()">
                <option *ngFor="let option of fuelOptions" [ngValue]="option.fuelType">{{option.fuelType}}</option>
              </select>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.otherFuelUsed == true">
            <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate
              <a class="form-text small click-link" (click)="showMixedCO2EmissionsModal()">
                Calculate Net CO<sub>2</sub> Emissions from Mixed Sources</a>
            </label>            
            <div class="input-group">
              <input class="form-control" name="totalEmissionOutputRate" type="number" (focus)="focusField('totalEmissionOutputRate')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.otherFuelCO2SavingsData.totalEmissionOutputRate" (input)="save()">
                <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/MMBtu</span>
                <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/GJ</span>
            </div>
          </div>
        </div>
      </div>
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.water.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.waterUsed" 
          (click)="toggleWaterUsed()" *ngIf = "!treasureHuntResults.water.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleWaterUsed()">
          Water
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.waterUsed == true">
          <label for="waterCost">Water Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('water', 'unit_costs')">Estimate Water Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWaterUnitCosts">Please fill out <b>{{waterFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input type="number" step="0.01" class="form-control" [(ngModel)]="settings.waterCost" id="waterCost"
              (input)="checkForm('water'); updateErrorText('water', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/gal</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/L</span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.waterUsed == true">
            <label for="annualWaterUsage">Water Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('water', 'annual_consumption')">Estimate Water Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWaterAnnualConsumption">Please fill out <b>{{waterFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualWaterUsage" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.waterUsage" (input)="checkForm('water'); updateErrorText('water', 'annual_consumption')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">L</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kgal</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.waterUsed == true">
            <label for="annualWaterCosts">Water Annual Costs
              <a class="form-text small click-link" (click)="calculateValue('water', 'annual_costs')">Estimate Water Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWaterAnnualCosts">Please fill out <b>{{waterFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualWaterCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.waterCosts" (input)="checkForm('water'); updateErrorText('water', 'annual_costs')">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.waterUsed == true">
            <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate</label>
            <div class="input-group">
              <input name="totalEmissionOutputRate" type="number" class="form-control"
                [(ngModel)]="treasureHunt.currentEnergyUsage.waterCO2OutputRate"
                id="totalEmissionOutputRate" (input)="save()" (focus)="focusField('totalEmissionOutputRate')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/gal</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/L</span>
            </div>
          </div>
        </div>
      </div>
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.wasteWater.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.wasteWaterUsed"
          (click)="toggleWasteWaterUsed()"  *ngIf = "!treasureHuntResults.wasteWater.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleWasteWaterUsed()">
          Wastewater
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.wasteWaterUsed == true">
          <label for="waterWasteCost">Wastewater Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('wastewater', 'unit_costs')">Estimate Wastewater Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWastewaterUnitCosts">Please fill out <b>{{wastewaterFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input type="number" class="form-control" step="0.01" [(ngModel)]="settings.waterWasteCost" id="waterWasteCost"
              (input)="checkForm('wastewater'); updateErrorText('wastewater', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/gal</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/L</span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.wasteWaterUsed == true">
            <label for="annualWasteWaterUsage">Wastewater Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('wastewater', 'annual_consumption')">Estimate Wastewater Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWastewaterAnnualConsumption">Please fill out <b>{{wastewaterFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualWasteWaterUsage" type="number" step="0.01" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.wasteWaterUsage" (input)="checkForm('wastewater'); updateErrorText('wastewater', 'annual_consumption')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">L</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kgal</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.wasteWaterUsed == true">
            <label for="annualWasteWaterCosts">Wastewater Annual Costs
              <a class="form-text small click-link" (click)="calculateValue('wastewater', 'annual_costs')">Estimate Wastewater Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorWastewaterAnnualCosts">Please fill out <b>{{wastewaterFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualWasteWaterCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.wasteWaterCosts" (input)="checkForm('wastewater'); updateErrorText('wastewater', 'annual_costs')">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.wasteWaterUsed == true">
            <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate</label>
            <div class="input-group">
              <input name="totalEmissionOutputRate" type="number" class="form-control"
                [(ngModel)]="treasureHunt.currentEnergyUsage.wasteWaterCO2OutputRate"
                id="totalEmissionOutputRate" (input)="save()" (focus)="focusField('totalEmissionOutputRate')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/gal</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/L</span>
            </div>
          </div>
        </div>
      </div>
    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.compressedAir.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.compressedAirUsed"
          (click)="toggleCompressedAirUsed()"  *ngIf = "!treasureHuntResults.compressedAir.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleCompressedAirUsed()">
          Compressed Air (as utility)
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.compressedAirUsed == true">
          <label for="compressedAirCost">Compressed Air Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('compressedAir', 'unit_costs')">Estimate Compressed Air Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorCompressedAirUnitCosts">Please fill out <b>{{compressedAirFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input type="number" step="0.01" class="form-control" [(ngModel)]="settings.compressedAirCost" id="compressedAirCost"
              (input)="checkForm('compressedAir'); updateErrorText('compressedAir', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="input-group-addon units" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/SCF</span>
            <span class="input-group-addon units" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/m<sup>3</sup></span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.compressedAirUsed == true">
            <label for="annualCompressedAirUsage">Compressed Air Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('compressedAir', 'annual_consumption')">Estimate Compressed Air Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorCompressedAirAnnualConsumption">Please fill out <b>{{compressedAirFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualCompressedAirUsage" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.compressedAirUsage" (input)="checkForm('compressedAir'); updateErrorText('compressedAir', 'annual_consumption')">
              <span class="units input-group-addon"
                *ngIf="settings.unitsOfMeasure != 'Imperial'">m<sup>3</sup></span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kSCF</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.compressedAirUsed == true">
            <label for="annualCompressedAirCosts">Compressed Air Annual Costs
              <a class="form-text small click-link" (click)="calculateValue('compressedAir', 'annual_costs')">Estimate Compressed Air Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorCompressedAirAnnualCosts">Please fill out <b>{{compressedAirFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualCompressedAirCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.compressedAirCosts" (input)="checkForm('compressedAir'); updateErrorText('compressedAir', 'annual_costs')">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.compressedAirUsed == true">
            <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate</label>
            <div class="input-group">
              <input name="totalEmissionOutputRate" type="number" class="form-control" 
                [(ngModel)]="treasureHunt.currentEnergyUsage.compressedAirCO2OutputRate"
                id="totalEmissionOutputRate" (input)="save()" (focus)="focusField('totalEmissionOutputRate')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/SCF</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/m<sup>3</sup></span>
            </div>
          </div>
        </div>
      </div>

    <div class="d-flex">
      <div class="p-1">
        <div class="text-center"  *ngIf = "treasureHuntResults.steam.energySavings">
          <i class="fa fa-check"></i>
        </div>
        <app-animated-checkmark [active]="treasureHunt.currentEnergyUsage.steamUsed"
         (click)="toggleSteamUsed()"  *ngIf = "!treasureHuntResults.steam.energySavings">
        </app-animated-checkmark>
      </div>
      <div class="d-flex flex-fill flex-column p-1">
        <label class="group-label" (click)="toggleSteamUsed()">
          Steam (as utility)
        </label>
        <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.steamUsed == true">
          <label for="steamCost">Steam Unit Cost
            <a class="form-text small click-link" (click)="calculateValue('steam', 'unit_costs')">Estimate Steam Unit Cost</a>
            <span class="alert-danger form-text small" *ngIf="formNotFilledErrorSteamUnitCosts">Please fill out <b>{{steamFormErrorText}}</b> before making an estimate.</span>
          </label>
          <div class="input-group">
            <input name="steamCost" type="number" step="0.01" class="form-control" id="steamCost"
              [(ngModel)]="settings.steamCost" (input)="checkForm('steam'); updateErrorText('steam', 'unit_costs'); setSaveSettings()" (focus)="focusField('operation-costs')">
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">$/klb</span>
            <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">$/tonne</span>
          </div>
        </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.steamUsed == true">
            <label for="annualSteamUsage">Steam Annual Consumption
              <a class="form-text small click-link" (click)="calculateValue('steam', 'annual_consumption')">Estimate Steam Annual Consumption</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorSteamAnnualConsumption">Please fill out <b>{{steamFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualSteamUsage" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.steamUsage" (input)="checkForm('steam'); updateErrorText('steam', 'annual_consumption')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">klb</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">tonne</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.steamUsed == true">
            <label for="annualSteamCosts">Steam Annual Costs
                            <a class="form-text small click-link" (click)="calculateValue('steam', 'annual_costs')">Estimate Steam Annual Costs</a>
              <span class="alert-danger form-text small" *ngIf="formNotFilledErrorSteamAnnualCosts">Please fill out <b>{{steamFormErrorText}}</b> before making an estimate.</span>
            </label>
            <div class="input-group">
              <input class="form-control" name="annualSteamCosts" type="number" step="100" (focus)="focusField('operation-costs')"
                [(ngModel)]="treasureHunt.currentEnergyUsage.steamCosts" (input)="checkForm('steam'); updateErrorText('steam', 'annual_costs');">
              <span class="input-group-addon units">$</span>
            </div>
          </div>
          <div class="form-group" *ngIf="treasureHunt.currentEnergyUsage.steamUsed == true">
            <label for="totalEmissionOutputRate">Total CO<sub>2</sub> Emission Output Rate</label>
            <div class="input-group">
              <input name="totalEmissionOutputRate" type="number" class="form-control" 
                [(ngModel)]="treasureHunt.currentEnergyUsage.steamCO2OutputRate"
                id="totalEmissionOutputRate" (input)="save()" (focus)="focusField('totalEmissionOutputRate')">
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure == 'Imperial'">kg CO<sub>2</sub>/klb</span>
              <span class="units input-group-addon" *ngIf="settings.unitsOfMeasure != 'Imperial'">kg CO<sub>2</sub>/tonne</span>
            </div>
          </div>
        </div>
      </div>
    </div>

<div bsModal #zipCodeModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="zipCodeModalLabel"
  aria-hidden="true" [config]="{backdrop: 'fixed'}">
  <div class="modal-dialog modal-md">
    <div class="modal-content" *ngIf="electricityModalShown"> 
      <div class="d-flex header mr-2 ml-2 pb-1 pt-1 justify-content-between">
        <div class="col-md-auto ico-col">
        </div>
        <div>
          <h3>Carbon Emissions by zip code</h3>
        </div>
        <button class="close pull-right" aria-label="Close" (click)="hideZipCodeModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      
      <div #modalBody class="modal-body p-5">
        <app-assessment-co2-savings [co2SavingsData]="co2SavingsData" [isFormDisabled]="false" [inBaseline]="true"
          [inTreasureHunt]="true" (emitUpdateCo2SavingsData)="updateElectricityCo2SavingsData($event)">
        </app-assessment-co2-savings>
      </div>
      <div class="modal-footer justify-content-end">
        <button class="btn btn-danger btn-sm pull-right mr-2" (click)="hideZipCodeModal()">Cancel</button>
        <span>
          <button class="btn btn-primary btn-sm pull-right" (click)="applyModalData()">Apply
            Data</button>
        </span>
      </div>
    </div>
  </div>
</div>

<div bsModal #mixedCO2EmissionsModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="mixedCO2EmissionsModalLabel" aria-hidden="true" [config]="{backdrop: 'fixed'}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" *ngIf="naturalGasEmissionsShown">
      <div class="d-flex header mr-2 ml-2 pb-1 pt-1 justify-content-between">
        <div class="col-md-auto ico-col">
        </div>
        <div>
          <h3>Carbon Emissions - Net Carbon Emissions Rate from Fuel</h3>
        </div>
        <button class="close pull-right" aria-label="Close" (click)="hideMixedCO2EmissionsModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div #modalBody class="modal-body p-2">
        <app-mixed-co2-emissions [fuelList]="treasureHunt.currentEnergyUsage.otherFuelMixedCO2SavingsData"
          [settings]="settings" (emitUpdateOtherFuelsOutputRate)="updateMixedCO2EmissionsModalData($event)"
          (emitUpdateOtherFuelsMixedList)="saveOtherFuelsMixedList($event)">

        </app-mixed-co2-emissions>
      </div>
      <div class="modal-footer justify-content-end">
        <button class="btn btn-danger btn-sm pull-right mr-2" (click)="hideMixedCO2EmissionsModal()">Cancel</button>
        <span>
          <button class="btn btn-primary btn-sm pull-right" (click)="applyMixedCO2EmissionsModal()">Apply
            Data</button>
        </span>
      </div>
    </div>
  </div>
</div>