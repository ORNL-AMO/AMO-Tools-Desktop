<div #content class="fsat-container fsat" *ngIf="assessment && settings">
  <div #header class="hide-print sticky-top">
    <app-fsat-banner [assessment]="assessment"></app-fsat-banner>
    <app-fsat-tabs></app-fsat-tabs>
  </div>

  <div *ngIf="mainTab == 'system-setup'" class="row tab-content scroll-item" [ngStyle]="{'height.px': containerHeight}">
    <div class="col-6 panel-column modification" [ngClass]="{'modal-open': isModalOpen == true}">
      <app-system-basics *ngIf="stepTab == 'system-basics'" [(settings)]="settings" [assessment]="assessment" (emitSave)="saveSettings($event)"></app-system-basics>
      <!-- <app-fsat-basics *ngIf="stepTab == 'fsat-basics'"></app-fsat-basics> -->
      <!-- <app-fsat-info *ngIf="stepTab == 'fsat-info'" [inSetup]="true" [selected]="true"></app-fsat-info> -->
      <app-fsat-fluid *ngIf="stepTab == 'fsat-fluid'" [inSetup]="true" [selected]="true" [baseGasDensity]="_fsat.baseGasDensity"
        (emitSave)="saveGasDensity($event)"></app-fsat-fluid>
      <app-fan-setup *ngIf="stepTab == 'fan-setup'" [inSetup]="true" [selected]="true" [fanSetup]="_fsat.fanSetup" (emitSave)="saveFanSetup($event)"></app-fan-setup>
      <app-fan-motor *ngIf="stepTab == 'fan-motor'" [settings]="settings" [inSetup]="true" [selected]="true" [fanMotor]="_fsat.fanMotor"
        (emitSave)="saveFanMotor($event)"></app-fan-motor>
      <app-fan-field-data *ngIf="stepTab == 'fan-field-data'" [settings]="settings" [inSetup]="true" [selected]="true" [fieldData]="_fsat.fieldData"
        [baseline]="true" (emitSave)="saveFieldData($event)" [fsat]="_fsat"></app-fan-field-data>
      <!-- <app-fan-curve-data [settings]="settings" *ngIf="stepTab == 'fan-curve-data'"></app-fan-curve-data>
      <app-operating-points [settings]="settings" (show203)="show203Modal()" *ngIf="stepTab == 'operating-points'"></app-operating-points>
      <app-rated-operating-points [settings]="settings" *ngIf="stepTab == 'rated-operating-points'"></app-rated-operating-points> -->
    </div>
    <div class="col-6 help-panel">
      <app-help-panel [settings]="settings" [inSetup]="true"></app-help-panel>
    </div>
  </div>
  <!--Assessment-->
  <div *ngIf="mainTab == 'assessment'" class="tab-content" [ngStyle]="{'height.px': containerHeight}">
    <app-explore-opportunities *ngIf="assessmentTab == 'explore-opportunities'" [assessment]="assessment" [settings]="settings"
      (emitSave)="saveFsat($event)" [containerHeight]="containerHeight" [modificationIndex]="modificationIndex" [modificationExists]="modificationExists"></app-explore-opportunities>
    <app-modify-conditions *ngIf="assessmentTab == 'modify-conditions'" [settings]="settings" [assessment]="assessment" [modificationIndex]="modificationIndex"
      [modificationExists]="modificationExists" (emitSaveAssessment)="saveFsat($event)"></app-modify-conditions>
  </div>

  <!--report-->
  <!-- <div class="tab-content" [ngStyle]="{'height.px': containerHeight}">
    <app-fsat-report></app-fsat-report>
  </div> -->

  <div class="row justify-content-center report-container" *ngIf="mainTab == 'report'">
    <div class="col-11 report-column">
      <app-fsat-report [fsat]="_fsat" [settings]="settings" [assessment]="assessment" [inFsat]="true" (closeReport)="closeReport()"
        (exportData)="exportData()" [containerHeight]="containerHeight"></app-fsat-report>
    </div>
  </div>

  <div #footer id="fsatFooter" class="footer hide-print row m-0">
    <div class="col-12">
      <div class="pull-right">
        <button class="btn btn-secondary">Save</button>
        <button class="btn btn-primary">Continue</button>
      </div>
    </div>
  </div>
</div>



<div bsModal #fsat203Modal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="fsat203Modal" aria-hidden="true"
  [config]="{backdrop: 'static'}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" aria-label="Close" (click)="hide203Modal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col tab-content">
            <app-fsat-203></app-fsat-203>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div bsModal #addNewModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="addNewModalLabel" aria-hidden="true"
  [config]="{backdrop: 'static'}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add New Scenario</h3>
        <button class="close" (click)="closeAddNewModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-add-modification *ngIf="showAdd" [fsat]="_fsat" [modifications]="_fsat.modifications" (save)="saveNewMod($event)"></app-add-modification>
      </div>
    </div>
  </div>
</div>

<div bsModal #changeModificationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="changeModificationModalLabel"
  aria-hidden="true" [config]="{backdrop: 'static'}" *ngIf="_fsat && _fsat.modifications">
  <div class="modal-dialog modal-lg list-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Select Scenario</h3>
        <button class="close" (click)="closeSelectModification()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-modification-list [fsat]="_fsat" (save)="save()" [modificationIndex]="modificationIndex" (close)="closeSelectModification()"></app-modification-list>
      </div>
    </div>
  </div>
</div>