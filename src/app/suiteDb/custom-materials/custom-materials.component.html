<div class="row">
  <div class="col-11 mx-auto pt-3">
    <div class="card card-item">
      <div class="card-header">
        Custom Materials Management
      </div>
      <div class="card-body p-1">
        <div class="actions d-flex align-items-center">
          <div class="d-flex flex-wrap">
            <button class="btn btn-secondary action-btn" [disabled]="!checkSelected()" type="button" (click)="delete()">Delete</button>
            <button class="btn btn-secondary action-btn" [disabled]="!checkSelected()" type="button" (click)="export()">Export</button>
            <button class="btn btn-secondary action-btn" type="button" (click)="showImportModal()">Import</button>
          </div>
          <label class="ml-auto select-all">
            <input type="checkbox" [(ngModel)]="isAllSelected" (change)="signalSelectAll()" />
            <a>Select all folder content</a>
          </label>
          <!-- <a (click)="emitImport()">Import...</a> -->
        </div>
        <p class="help-text text-center">View, create, or edit your custom materials.</p>
      </div>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('flue')">Custom Gaseous Fuels
          <span class="fa fa-chevron-up pull-right" *ngIf="!showFlueMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showFlueMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showFlueMaterials" (click)="toggleModal('flue')">+Add Custom Gaseous Fuel</a>
        <!-- <p class="help-text">View, create, edit your custom flue gas materials.</p> -->
      </div>
    </div>
    <app-custom-flue-gas-materials *ngIf="showFlueMaterials" [settings]="settings" [showModal]="showFlueModal" [importing]="importing"></app-custom-flue-gas-materials>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('solid-liquid-flue')">Custom Solid/Liquid Fuels
          <span class="fa fa-chevron-up pull-right" *ngIf="!showSolidLiquidFlueMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showSolidLiquidFlueMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showSolidLiquidFlueMaterials" (click)="toggleModal('solid-liquid-flue')">+Add Custom Solid/Liquid Fuel</a>
        <!-- <p class="help-text">View, create, edit your custom solid/liquid flue gas materials.</p> -->
      </div>
    </div>
    <app-custom-solid-liquid-flue-gas-materials *ngIf="showSolidLiquidFlueMaterials" [settings]="settings" [showModal]="showSolidLiquidFlueModal"
      [importing]="importing"></app-custom-solid-liquid-flue-gas-materials>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('gas-load')">Custom Gas Load Charge Materials
          <span class="fa fa-chevron-up pull-right" *ngIf="!showGasLoadChargeMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showGasLoadChargeMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showGasLoadChargeMaterials" (click)="toggleModal('gas-load')">+Add Custom Gas Load Charge Material</a>
        <!-- <p class="help-text">View, create, edit your custom gas load charge materials.</p> -->
      </div>
    </div>
    <app-custom-gas-load-charge-materials *ngIf="showGasLoadChargeMaterials" [settings]="settings" [showModal]="showGasLoadChargeModal"
      [importing]="importing"></app-custom-gas-load-charge-materials>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('liquid-load')">Custom Liquid Load Charge Materials
          <span class="fa fa-chevron-up pull-right" *ngIf="!showLiquidLoadChargeMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showLiquidLoadChargeMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showLiquidLoadChargeMaterials" (click)="toggleModal('liquid-load')">+Add Custom Liquid Load Charge Material</a>
        <!-- <p class="help-text">View, create, edit your custom liquid load charge materials.</p> -->
      </div>
    </div>
    <app-custom-liquid-load-charge-materials *ngIf="showLiquidLoadChargeMaterials" [settings]="settings" [showModal]="showLiquidLoadChargeModal"
      [importing]="importing"></app-custom-liquid-load-charge-materials>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('solid-load')">Custom Solid Load Charge Materials
          <span class="fa fa-chevron-up pull-right" *ngIf="!showSolidLoadChargeMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showSolidLoadChargeMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showSolidLoadChargeMaterials" (click)="toggleModal('solid-load')">+Add Custom Solid Load Charge Material</a>
        <!-- <p class="help-text">View, create, edit your custom solid load charge materials.</p> -->
      </div>
    </div>
    <app-custom-solid-load-charge-materials *ngIf="showSolidLoadChargeMaterials" [settings]="settings" [showModal]="showSolidLoadChargeModal"
      [importing]="importing"></app-custom-solid-load-charge-materials>
  </div>
</div>


<div class="row">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('atmosphere-material')">Custom Atmosphere Gases
          <span class="fa fa-chevron-up pull-right" *ngIf="!showAtmosphereMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showAtmosphereMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showAtmosphereMaterials" (click)="toggleModal('atmosphere-material')">+Add Custom Atmosphere Gas</a>
        <!-- <p class="help-text">View, create, edit your custom atmosphere specific heat materials.</p> -->
      </div>
    </div>
    <app-custom-atmosphere-specific-heat-materials *ngIf="showAtmosphereMaterials" [settings]="settings" [showModal]="showAtmosphereModal"
      [importing]="importing"></app-custom-atmosphere-specific-heat-materials>
  </div>
</div>


<div class="row mb-5">
  <div class="col-11 mx-auto">
    <div class="tab-content content-container">
      <div class="card-form">
        <label class="group-label general" (click)="toggleMaterial('wall-surface')">Wall Surfaces
          <span class="fa fa-chevron-up pull-right" *ngIf="!showWallSurfaceMaterials"></span>
          <span class="fa fa-chevron-down pull-right" *ngIf="showWallSurfaceMaterials"></span>
        </label>
        <a class="click-link pull-right small" *ngIf="showWallSurfaceMaterials" (click)="toggleModal('wall-surface')">+Add New Wall Surface</a>
        <!-- <p class="help-text">View, create, edit your custom wall losses surfaces.</p> -->
      </div>
    </div>
    <app-custom-wall-losses-surfaces *ngIf="showWallSurfaceMaterials" [settings]="settings" [showModal]="showWallSurfaceModal"
      [importing]="importing"></app-custom-wall-losses-surfaces>
  </div>
</div>

<!--Export Modal-->
<div bsModal #exportModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exportModalLabel" aria-hidden="true"
  [config]="{backdrop: 'static'}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        Export Custom Materials
        <button class="close" aria-label="Close" (click)="hideExportModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body scroll-item" *ngIf="exportModalOpen">
        <div class="pb-1" *ngIf="selectedMaterialData.atmosphereSpecificHeat.length != 0">
          <h6>Atmosphere Specific Heat</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.atmosphereSpecificHeat">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.flueGasMaterial.length != 0">
          <h6>Flue Gas Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.flueGasMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.gasLoadChargeMaterial.length != 0">
          <h6>Gas Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.gasLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.liquidLoadChargeMaterial.length != 0">
          <h6>Liquid Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.liquidLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.solidLiquidFlueGasMaterial.length != 0">
          <h6>Solid-Liquid Flue Gas Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.solidLiquidFlueGasMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.solidLoadChargeMaterial.length != 0">
          <h6>Solid Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.solidLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.wallLossesSurface.length != 0">
          <h6>Wall Loss Surfaces</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.wallLossesSurface">{{material.surface}}</div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary pull-right" (click)="exportData()">Export</button>
      </div>
    </div>
  </div>
</div>

<!--Import Modal-->
<div bsModal #importModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="importModalLabel" aria-hidden="true"
  [config]="{backdrop: 'static'}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        Import Custom Materials
        <button class="close" aria-label="Close" (click)="hideImportModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row" *ngIf="!importing">
          <div class="col-12 form-group">
            <input type="file" class="form-control-file" (change)="setImportFile($event)">
            <span class="alert-danger small" *ngIf="isInvalidFile == false">Invalid File Type - Must have a .json file extension</span>
          </div>
        </div>
        <div class="row justify-content-center" *ngIf="importing">
          <div class="col-md-10">
            <div class="main-content" style="text-align: center;">
              <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
              </div>
              <h3>Importing Data...</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="d-flex flex-column w-100">
          <p class="danger text-center small" [innerHTML]="importFileError"></p>
          <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" (click)="hideImportModal()">Cancel</button>
            <button [disabled]="isValidFile !== true" class="btn btn-primary" (click)="importFile()">Import</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Delete Modal-->
<div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true"
  [config]="{backdrop: 'static'}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        Delete Custom Materials
        <button class="close" aria-label="Close" (click)="hideDeleteModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body scroll-item" *ngIf="deleteModalOpen && !importing">
        <div class="pb-1" *ngIf="selectedMaterialData.atmosphereSpecificHeat.length != 0">
          <h6>Atmosphere Specific Heat</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.atmosphereSpecificHeat">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.flueGasMaterial.length != 0">
          <h6>Flue Gas Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.flueGasMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.gasLoadChargeMaterial.length != 0">
          <h6>Gas Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.gasLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.liquidLoadChargeMaterial.length != 0">
          <h6>Liquid Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.liquidLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.solidLiquidFlueGasMaterial.length != 0">
          <h6>Solid-Liquid Flue Gas Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.solidLiquidFlueGasMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.solidLoadChargeMaterial.length != 0">
          <h6>Solid Load Charge Materials</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.solidLoadChargeMaterial">{{material.substance}}</div>
        </div>
        <div class="pb-1" *ngIf="selectedMaterialData.wallLossesSurface.length != 0">
          <h6>Wall Loss Surfaces</h6>
          <div class="pl-2 material-item" *ngFor="let material of selectedMaterialData.wallLossesSurface">{{material.surface}}</div>
        </div>
      </div>
      <div class="modal-body" *ngIf="deleteModalOpen && importing">
        <div class="row justify-content-center">
          <div class="col-md-10">
            <div class="main-content" style="text-align: center;">
              <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
              </div>
              <h3>Deleting Data...</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="d-flex">
          <div class="w-75">
            <p class="text-center small">Are you sure you want to
              <span class="delete">delete</span> these materials? This cannot be undone.</p>
          </div>
          <div class="p-3">
            <button class="btn btn-danger pull-right" (click)="deleteData()">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>