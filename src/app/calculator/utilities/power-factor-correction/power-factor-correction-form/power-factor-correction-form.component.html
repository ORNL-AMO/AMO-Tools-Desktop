<!-- <form>
  <div class="form-group">
    <label for="currentDemand">Existing Demand</label>
    <div class="input-group">
      <input name="currentDemand" class="form-control" type="number" step="any" [(ngModel)]="data.existingDemand"
        id="currentDemand" (input)="calculate()" onfocus="this.select();" (focus)="focusField('existingDemand')">
      <span class="input-group-addon units">kW</span>
    </div>
  </div>
  
  <div class="form-group">
    <label for="currentPowerFactor">Existing Power Factor</label>
    <input name="currentPowerFactor" class="form-control" type="number" step="any" [(ngModel)]="data.currentPowerFactor"
      id="currentPowerFactor" (input)="calculate()" onfocus="this.select();" (focus)="focusField('currentPowerFactor')">
  </div>

  <div class="form-group">
    <label for="proposedPowerFactor">Proposed Power Factor</label>
    <input name="proposedPowerFactor" class="form-control" type="number" step="any"
      [(ngModel)]="data.proposedPowerFactor" id="proposedPowerFactor" (input)="calculate()" onfocus="this.select();"
      (focus)="focusField('proposedPowerFactor')">
  </div>


</form> -->

<form>

  <div class="form-group">
    <label for="billedForDemand">How are you billed for Demand</label>
    <select id="billedForDemand" name="billedForDemand" class="form-control" [(ngModel)]="data.billedForDemand"
      (focus)="focusField('billedForDemand')" (change)="setBilledForDemand()">
      <option *ngFor="let option of billedOptions" [ngValue]="option.value">{{option.name}}</option>
    </select>
  </div>

  <div *ngIf="data.billedForDemand == 0" class="form-group">
    <label for="minimumPowerFactor">Minimum Required Power Factor</label>
    <input name="minimumPowerFactor" class="form-control" type="number" step="any" [(ngModel)]="data.minimumPowerFactor"
      id="minimumPowerFactor" (input)="calculate()" onfocus="this.select();" (focus)="focusField('minimumPowerFactor')">
  </div>

  <div *ngIf="data.billedForDemand == 1" class="form-group">
    <label for="targetPowerFactor">Target Power Factor</label>
    <input name="targetPowerFactor" class="form-control" type="number" step="any" [(ngModel)]="data.targetPowerFactor"
      id="targetPowerFactor" (input)="calculate()" onfocus="this.select();" (focus)="focusField('targetPowerFactor')">
  </div>

  <div class="form-group">
    <label for="adjustedOrActual">PF Adjusted or Actual Demand</label>
    <select id="adjustedOrActual" name="adjustedOrActual" class="form-control" [(ngModel)]="data.adjustedOrActual"
      (focus)="focusField('adjustedOrActual')" (change)="setAdjustedOrActual()">
      <option *ngFor="let option of demandOptions" [ngValue]="option.value">{{option.name}}</option>
    </select>
  </div>

  <div class="form-group">
    <label for="marginalCostOfDemand">Marginal Cost of Demand</label>
    <div class="input-group  calc-addon-group">
      <input name="marginalCostOfDemand" class="form-control" type="number" step="any"
        [(ngModel)]="data.marginalCostOfDemand" id="marginalCostOfDemand" (input)="calculate()" onfocus="this.select();"
        (focus)="focusField('marginalCostOfDemand')">
        <span class="input-group-addon units">$/kVA</span>
    </div>
  </div>

  <div class="form-group">
    <label for="costOfStaticCapacitance">Cost of Static Capacitance</label>
    <div class="input-group  calc-addon-group">
      <input name="costOfStaticCapacitance" class="form-control" type="number" step="any"
        [(ngModel)]="data.costOfStaticCapacitance" id="costOfStaticCapacitance" (input)="calculate()"
        onfocus="this.select();" (focus)="focusField('costOfStaticCapacitance')">
        <span class="input-group-addon units">$/kVAr</span>
    </div>
  </div>

  <div class="form-group">
    <label for="costOfDynamicCapacitance">Cost of Dynamic Capacitance</label>
    <div class="input-group  calc-addon-group">
      <input name="costOfDynamicCapacitance" class="form-control" type="number" step="any"
        [(ngModel)]="data.costOfDynamicCapacitance" id="costOfDynamicCapacitance" (input)="calculate()"
        onfocus="this.select();" (focus)="focusField('costOfDynamicCapacitance')">
        <span class="input-group-addon units">$/kVAr</span>
    </div>
  </div>

</form>

<table class="table table-hover" style="width: 100%">
  <tr>
    <th>
      Month
    </th>

    <th>
      <span *ngIf="data.billedForDemand == 0 && data.adjustedOrActual == 0">
        PF Adjusted Demand (kW)
      </span>
      <span  *ngIf="data.billedForDemand == 0 && data.adjustedOrActual == 1">
        Actual Demand (kW)
      </span>
      <span *ngIf="data.billedForDemand == 1 && (data.adjustedOrActual == 0 || data.adjustedOrActual == 1)">
        Apparent Power (kVA)
      </span>
    </th>

    <th>
      <span *ngIf="(data.billedForDemand == 0 && data.adjustedOrActual == 0) || (data.billedForDemand == 0 && data.adjustedOrActual == 1) || (data.billedForDemand == 1 && data.adjustedOrActual == 0)">
        Power Factor
      </span>
      <span *ngIf="data.billedForDemand == 1 && data.adjustedOrActual == 1">
        Real Demand (kW)
      </span>
    </th>
    <th>

    </th>
  </tr>

  <tr *ngFor="let input of data.monthyInputs; let i = index;">
    <td>
      Month {{i + 1}}
    </td>
    <td>
      <input name="{{'input1_'+i}}" class="form-control" type="number" step="any"
        [(ngModel)]="input.input1" id="{{'input1_'+i}}" (input)="calculate()" onfocus="this.select();"
        (focus)="focusField('input1')">      
    </td>
    <td>
      <input name="{{'input2_'+i}}" class="form-control" type="number" step="any"
        [(ngModel)]="input.input2" id="{{'input2_'+i}}" (input)="calculate()" onfocus="this.select();"
        (focus)="focusField('input2')">   
    </td>
    <td class="btn-group btn-group-sm">
      <button type="button" class="btn btn-danger pull-right btn-sm btn-form" (click)="btnDeleteMonth(i)">
        Delete
      </button>
    </td>
  </tr>

</table>

<div class="w-100 justify-content-center btn-group btn-group-sm"> 
  <button type="button" class="btn btn-primary pull-left btn-sm m-2 btn-form" (click)="btnAddMonth()">
    Add Month
  </button>
  
</div>