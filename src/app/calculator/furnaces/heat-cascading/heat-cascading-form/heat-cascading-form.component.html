<form #formElement [formGroup]="form">
      <label class="group-label my-1">
        Primary Process
      </label>
      
      <div class="form-group">
        <label class="small" for="priOpHours">Annual Operating Hours</label>
        <div class="input-group">
          <span *ngIf="!showSecOpHoursModal" class="input-group-addon op-hour-addon units">
            <a class="click-link" (click)="openOpHoursModal('primary')"><span class="fa fa-calculator"></span></a>
          </span>
          <input class="form-control" name="priOpHours" id="priOpHours"
            formControlName="priOpHours" type="number" (input)="calculate()" (focus)="focusField('operationHours')"
           onfocus="this.select();">
          <span class="units input-group-addon">hrs/yr</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priOpHours.invalid && !form.controls.priOpHours.pristine">
          <span *ngIf="form.controls.priOpHours.errors.required">Value required.</span>
          <span *ngIf="form.controls.priOpHours.errors.max">Value can't be greater than
            {{form.controls.priOpHours.errors.max.max}}.</span>
          <span *ngIf="form.controls.priOpHours.errors.min">Value can't be less than
            {{form.controls.priOpHours.errors.min.min}}.</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="materialTypeId">Fuel
          <a id="materialHelp" class="form-text small click-link" (click)="showMaterialModal()" *ngIf="!inModal">Add New Fuel</a>
        </label>
        <select name="materialTypeId" class="form-control" formControlName="materialTypeId" id="materialTypeId"
          (change)="setMaterialProperties()" (focus)="focusField('materialTypeId')" >
          <option *ngFor="let option of fuelOptions" [ngValue]="option.id">{{option.substance}}</option>
        </select>
      </div>

      <div class="form-group">
        <label class="small" for="priFuelHV"> Fuel Heating Value</label>
        <div class="input-group">
          <input name="priFuelHV" type="number" step="10" class="form-control"
            formControlName="priFuelHV" id="priFuelHV" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('fuelHV')" >
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="input-group-addon units">Btu/SCF</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="input-group-addon units">MJ/m<sup>3</sup>
              <!-- <span *ngIf="settings.unitsOfMeasure == 'Metric'">{{newMaterial.heatingValueVolume | sigFigs:'6'}} kJ/Nm<sup>3</sup></span> -->
            </span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priFuelHV.invalid && !form.controls.priFuelHV.pristine">
          <span *ngIf="form.controls.priFuelHV.errors.required">Value Required</span>
        </span>
      </div>
      
      <div class="form-group">
        <label class="small" for="priAvailableHeat">
            Available Heat
          <a id="materialHelp" class="form-text small click-link" (click)="initFlueGasModal('primary')">Calculate</a>
        </label>
        <div class="input-group">
          <input  name="priAvailableHeat" type="number" step="any" min="0"
          class="form-control" formControlName="priAvailableHeat" id="priAvailableHeat" onfocus="this.select();"
          (input)="calculate()" (focus)="focusField('availableHeat')">
          <span class="input-group-addon units">%</span>
        </div>
        <span class="alert-danger pull-right small"
        *ngIf="form.controls.priAvailableHeat.invalid && !form.controls.priAvailableHeat.pristine">
        <span *ngIf="form.controls.priAvailableHeat.errors.required">Value Required</span>
        <span *ngIf="form.controls.priAvailableHeat.errors.greaterThan == 0">Value must be greater than than
          0.</span>
          <span *ngIf="form.controls.priAvailableHeat.errors.max">Value can't be greater than
            {{form.controls.priAvailableHeat.errors.max.max}}%</span>
      </span>
      </div>


      <div class="form-group">
        <label class="small" for="priFiringRate">Heat Input (Firing) Rate - Average </label>
        <div class="input-group">
          <input name="priFiringRate" type="number" step="10" class="form-control"
            formControlName="priFiringRate" id="priFiringRate" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('firingRate')" >
          <span class="input-group-addon units">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu/hr</span>
						<span *ngIf="settings.unitsOfMeasure == 'Metric'">GJ/hr</span>
          </span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priFiringRate.invalid && !form.controls.priFiringRate.pristine">
          <span *ngIf="form.controls.priFiringRate.errors.required">Value Required</span>
          <span *ngIf="form.controls.priFiringRate.errors.greaterThan == 0">Value must be greater than than
            0.</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="priExhaustTemperature"> (Hot) Process Exhaust Gas Temperature</label>
        <div class="input-group">
          <input name="priExhaustTemperature" type="number" step="10" class="form-control"
            formControlName="priExhaustTemperature" id="priExhaustTemperature" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('exhaustTemperature')" >
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="input-group-addon units">&#8457;</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="input-group-addon units">&#8451;</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priExhaustTemperature.invalid && !form.controls.priExhaustTemperature.pristine">
          <span *ngIf="form.controls.priExhaustTemperature.errors.required">Value Required</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="priExhaustO2"> % Oxygen in (Higher Temperature) Exhaust</label>
        <div class="input-group">
          <input name="priExhaustO2" type="number" step="10" class="form-control"
            formControlName="priExhaustO2" id="priExhaustO2" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('exhaustO2')" >
            <span class="input-group-addon units">%</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priExhaustO2.invalid && !form.controls.priExhaustO2.pristine">
          <span *ngIf="form.controls.priExhaustO2.errors.required">Value required.</span>
          <span *ngIf="form.controls.priExhaustO2.errors.max">Value can't be greater than
            {{form.controls.priExhaustO2.errors.max.max}}.</span>
          <span *ngIf="form.controls.priExhaustO2.errors.min">Value can't be less than
            {{form.controls.priExhaustO2.errors.min.min}}.</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="priCombAirTemperature"> Combustion Air Temperature for Primary Process Burners</label>
        <div class="input-group">
          <input name="priCombAirTemperature" type="number" step="10" class="form-control"
            formControlName="priCombAirTemperature" id="priCombAirTemperature" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('combAirTemperature')" >
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="input-group-addon units">&#8457;</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="input-group-addon units">&#8451;</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.priCombAirTemperature.invalid && !form.controls.priCombAirTemperature.pristine">
          <span *ngIf="form.controls.priCombAirTemperature.errors.required">Value Required</span>
        </span>
      </div>

      

      <label class="group-label mt-3 mb-1">
        Secondary Process
      </label>
      
      <div class="form-group">
        <label class="small" for="secOpHours">Annual Operating Hours</label>
        <div class="input-group">
          <span *ngIf="!showPriOpHoursModal" class="input-group-addon op-hour-addon units">
            <a class="click-link" *ngIf="!showPriOpHoursModal" (click)="openOpHoursModal('secondary')"><span class="fa fa-calculator"></span></a>
          </span>
          <input class="form-control" name="secOpHours" id="secOpHours" formControlName="secOpHours" type="number"
            (input)="calculate()" (focus)="focusField('operationHours')" onfocus="this.select();">
          <span class="units input-group-addon">hrs/yr</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secOpHours.invalid && !form.controls.secOpHours.pristine">
          <span *ngIf="form.controls.secOpHours.errors.required">Value required.</span>
          <span *ngIf="form.controls.secOpHours.errors.max">Value can't be greater than
            {{form.controls.secOpHours.errors.max.max}}.</span>
          <span *ngIf="form.controls.secOpHours.errors.min">Value can't be less than
            {{form.controls.secOpHours.errors.min.min}}.</span>
        </span>
      </div>
      
      <div class="form-group">
        <label class="small" for="secFuelCost">
          Fuel Cost
        </label>
        <div class="input-group">
          <input name="secFuelCost" type="number" class="form-control" formControlName="secFuelCost" id="secFuelCost"
            onfocus="this.select();" (input)="calculate()" (focus)="focusField('secFuelCost')">
          <span class="input-group-addon units">$ /
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu</span>
						<span *ngIf="settings.unitsOfMeasure == 'Metric'">GJ</span>
          </span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secFuelCost.invalid && !form.controls.secFuelCost.pristine">
          <span *ngIf="form.controls.secFuelCost.errors.required">Value Required</span>
        </span>
      </div>
      
      <div class="form-group">
        <label class="small" for="secAvailableHeat">
          Available Heat
          <a id="materialHelp" class="form-text small click-link" (click)="initFlueGasModal('secondary')">Calculate</a>
        </label>
        <div class="input-group">
          <input name="secAvailableHeat" type="number" step="any" min="0" class="form-control"
            formControlName="secAvailableHeat" id="secAvailableHeat" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('availableHeat')">
          <span class="input-group-addon units">%</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secAvailableHeat.invalid && !form.controls.secAvailableHeat.pristine">
          <span *ngIf="form.controls.secAvailableHeat.errors.required">Value Required</span>
          <span *ngIf="form.controls.secAvailableHeat.errors.greaterThan == 0">Value must be greater than than
            0.</span>
          <span *ngIf="form.controls.secAvailableHeat.errors.max">Value can't be greater than
            {{form.controls.secAvailableHeat.errors.max.max}}%</span>
        </span>
      </div>
          
      <div class="form-group">
        <label class="small" for="secFiringRate">Heat Input (Firing) Rate - Average </label>
        <div class="input-group">
          <input name="secFiringRate" type="number" step="10" class="form-control"
            formControlName="secFiringRate" id="secFiringRate" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('firingRate')" >
          <span class="input-group-addon units">
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'">MMBtu/hr</span>
						<span *ngIf="settings.unitsOfMeasure == 'Metric'">GJ/hr</span>
          </span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secFiringRate.invalid && !form.controls.secFiringRate.pristine">
          <span *ngIf="form.controls.secFiringRate.errors.required">Value Required</span>
          <span *ngIf="form.controls.secFiringRate.errors.greaterThan == 0">Value must be greater than than
            0.</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="secExhaustTemperature"> (Hot) Process Exhaust Gas Temperature</label>
        <div class="input-group">
          <input name="secExhaustTemperature" type="number" step="10" class="form-control"
            formControlName="secExhaustTemperature" id="secExhaustTemperature" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('exhaustTemperature')" >
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="input-group-addon units">&#8457;</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="input-group-addon units">&#8451;</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secExhaustTemperature.invalid && !form.controls.secExhaustTemperature.pristine">
          <span *ngIf="form.controls.secExhaustTemperature.errors.required">Value Required</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="secExhaustO2"> % Oxygen in (Higher Temperature) Exhaust</label>
        <div class="input-group">
          <input name="secExhaustO2" type="number" step="10" class="form-control"
            formControlName="secExhaustO2" id="secExhaustO2" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('exhaustO2')" >
            <span class="input-group-addon units">%</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secExhaustO2.invalid && !form.controls.secExhaustO2.pristine">
          <span *ngIf="form.controls.secExhaustO2.errors.required">Value required.</span>
          <span *ngIf="form.controls.secExhaustO2.errors.max">Value can't be greater than
            {{form.controls.secExhaustO2.errors.max.max}}.</span>
          <span *ngIf="form.controls.secExhaustO2.errors.min">Value can't be less than
            {{form.controls.secExhaustO2.errors.min.min}}.</span>
        </span>
      </div>

      <div class="form-group">
        <label class="small" for="secCombAirTemperature"> Combustion Air Temperature for Secondary Process Burners</label>
        <div class="input-group">
          <input name="secCombAirTemperature" type="number" step="10" class="form-control"
            formControlName="secCombAirTemperature" id="secCombAirTemperature" onfocus="this.select();"
            (input)="calculate()" (focus)="focusField('combAirTemperature')" >
            <span *ngIf="settings.unitsOfMeasure == 'Imperial'" class="input-group-addon units">&#8457;</span>
            <span *ngIf="settings.unitsOfMeasure == 'Metric'" class="input-group-addon units">&#8451;</span>
        </div>
        <span class="alert-danger pull-right small"
          *ngIf="form.controls.secCombAirTemperature.invalid && !form.controls.secCombAirTemperature.pristine">
          <span *ngIf="form.controls.secCombAirTemperature.errors.required">Value Required</span>
        </span>
      </div>    

  </form>

<div bsModal #gasMaterialModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="materialModalLabel" aria-hidden="true" [config]="{backdrop: 'static'}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div>
        <app-flue-gas-material *ngIf="gasMaterialModal.isShown" (closeModal)="hideMaterialModal($event)"
          (hideModal)="hideMaterialModal($event)" [settings]="settings"></app-flue-gas-material>
      </div>
    </div>
  </div>
</div>

<div bsModal #flueGasModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="flueGasModalLabel"
    aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div>
          <app-flue-gas-modal *ngIf="showPriFlueGasModal || showSecFlueGasModal" 
          [hideSolidLiquidMaterial]="true"
          (closeModal)="hideFlueGasModal($event)" 
          (hideModal)="hideFlueGasModal($event)"
            [settings]="settings"></app-flue-gas-modal>
        </div>
      </div>
    </div>
  </div>

<app-operating-hours-modal *ngIf="showPriOpHoursModal || showSecOpHoursModal" (emitClose)="closeOperatingHoursModal()"
(emitSave)="updateOperatingHours($event)" [width]="formWidth" [showMinutesSeconds]="true">
</app-operating-hours-modal>