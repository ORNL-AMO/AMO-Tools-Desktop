<form [formGroup]="pumpSystemCurveForm" class="form-section">
    <label class="group-label">
        System Curve</label>
    <div class="form-group">
        <label class="small" for="specificGravity">Fluid Specific Gravity</label>
        <input type="number" step="any" class="form-control" formControlName="specificGravity" id="specificGravity"
            (input)="saveChanges()" onfocus="this.select();" (focus)="focusField('specificGravity')">
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.specificGravity.invalid && !pumpSystemCurveForm.controls.specificGravity.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.specificGravity.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.specificGravity.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.specificGravity.errors.min.min}}.</span>
        </span>
    </div>
    <div class="form-group">
        <label class="small" for="systemLossExponent">System Loss Exponent, C</label>
        <input type="number" min="1" max="2.5" step="any" class="form-control" formControlName="systemLossExponent"
            id="systemLossExponent" (input)="saveChanges()" onfocus="this.select();"
            (focus)="focusField('systemLossExponent')">
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.systemLossExponent.invalid && !pumpSystemCurveForm.controls.systemLossExponent.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.systemLossExponent.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.systemLossExponent.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.systemLossExponent.errors.min.min}}.</span>
        </span>
    </div>
    <!--Point 1-->

    <label class="group-label" for="pointAdjustment">Point 1</label>
    <div class="form-group">
        <label class="small" for="pointOneFlowRate">Flow Rate</label>
        <div class="input-group calc-addon-group">
            <input type="number" step="any" class="form-control addon-input" id="pointOneFlowRate"
                formControlName="pointOneFlowRate" (input)="saveChanges()" onfocus="this.select();"
                (focus)="focusField('pointOneFlowRate')">
            <span class="input-group-addon units" [innerHTML]="settings.flowMeasurement | settingsLabel"></span>
        </div>
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.pointOneFlowRate.invalid && !pumpSystemCurveForm.controls.pointOneFlowRate.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.pointOneFlowRate.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.pointOneFlowRate.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.pointOneFlowRate.errors.min.min}}.</span>
        </span>
    </div>
    <div class="form-group">
        <label class="small" for="pointOneHead">Head</label>
        <div class="input-group calc-addon-group">
            <input type="number" step="any" class="form-control addon-input" id="pointOneHead"
                formControlName="pointOneHead" (input)="saveChanges()" onfocus="this.select();"
                (focus)="focusField('pointOneHead')">
            <span class="input-group-addon units" [innerHTML]="settings.distanceMeasurement | settingsLabel"></span>
        </div>
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.pointOneHead.invalid && !pumpSystemCurveForm.controls.pointOneHead.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.pointOneHead.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.pointOneHead.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.pointOneHead.errors.min.min}}.</span>
        </span>
    </div>
    <!--Point 2-->
    <label class="group-label" for="pointTwo">Point 2</label>
    <div class="form-group">
        <label class="small" for="pointTwoFlowRate">Flow Rate</label>
        <div class="input-group calc-addon-group">
            <input type="number" step="any" class="form-control addon-input" id="pointTwoFlowRate"
                formControlName="pointTwoFlowRate" (input)="saveChanges()" onfocus="this.select();"
                (focus)="focusField('pointTwoFlowRate')">
            <span class="input-group-addon units" [innerHTML]="settings.flowMeasurement | settingsLabel"></span>
        </div>
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.pointTwoFlowRate.invalid && !pumpSystemCurveForm.controls.pointTwoFlowRate.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.pointTwoFlowRate.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.pointTwoFlowRate.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.pointTwoFlowRate.errors.min.min}}.</span>
        </span>
    </div>
    <div class="form-group">
        <label class="small" for="pointTwoHead">Head</label>
        <div class="input-group calc-addon-group">
            <input type="number" step="any" class="form-control addon-input" id="pointTwoHead"
                formControlName="pointTwoHead" (input)="saveChanges()" onfocus="this.select();"
                (focus)="focusField('pointTwoHead')">
            <span class="input-group-addon units" [innerHTML]="settings.distanceMeasurement | settingsLabel"></span>
        </div>
        <span class="alert-danger pull-right small"
            *ngIf="pumpSystemCurveForm.controls.pointTwoHead.invalid && !pumpSystemCurveForm.controls.pointTwoHead.pristine">
            <span *ngIf="pumpSystemCurveForm.controls.pointTwoHead.errors.required">Value required.</span>
            <span *ngIf="pumpSystemCurveForm.controls.pointTwoHead.errors.min">Value can't be less than
                {{pumpSystemCurveForm.controls.pointTwoHead.errors.min.min}}.</span>
        </span>
    </div>

    <div class="d-block pt-3">
        <h5 class="group-label group-mod-label" (click)="togglePumpModification()">Pump Modification Data
            <span *ngIf="pumpModificationCollapsed == 'open'"
                class="remove-curve fa fa-minus pull-right"></span>
            <span *ngIf="pumpModificationCollapsed == 'closed'"
                class="add-curve fa fa-plus pull-right"></span>
        </h5>
        <div class="mb-3 d-block" *ngIf="pumpModificationCollapsed == 'open'">
            <label class="group-label w-auto mb-1">Modified Condition</label>
            <div class="row no-gutters">
                <div class="col-6 form-group">
                    <select id="modificationMeasurementOption" name="modificationMeasurementOption" class="form-control"
                        (change)="saveChanges()" formControlName="modificationMeasurementOption"
                        (focus)="focusField('modifiedFlow')">
                        <option *ngFor="let option of modificationOptions" [ngValue]="option.value">{{option.display}}</option>
                    </select>
                </div>
                <div *ngIf="pumpSystemCurveForm.controls.modificationMeasurementOption.value == 0" class="col-6 form-group">
                    <div class="input-group">
                        <input type="number" step="any" class="form-control addon-input" id="modifiedFlow"
                            formControlName="modifiedFlow" (input)="saveChanges()" onfocus="this.select();"
                            (focus)="focusField('modifiedFlow')">
                        <span class="input-group-addon units" [innerHTML]="settings.flowMeasurement | settingsLabel"></span>
                    </div>
                    <span class="alert-danger pull-right small"
                        *ngIf="pumpSystemCurveForm.controls.modifiedFlow.invalid && !pumpSystemCurveForm.controls.modifiedFlow.pristine">
                        <span *ngIf="pumpSystemCurveForm.controls.modifiedFlow.errors.required">Value required.</span>
                        <span *ngIf="pumpSystemCurveForm.controls.modifiedFlow.errors.min">Value can't be less than
                            {{pumpSystemCurveForm.controls.modifiedFlow.errors.min.min}}.</span>
                    </span>
                </div>
                <div *ngIf="pumpSystemCurveForm.controls.modificationMeasurementOption.value == 1" class="col-6 no-gutters form-group">
                <div class="input-group">
                    <input type="number" step="any" class="form-control addon-input" id="modifiedHead"
                    formControlName="modifiedHead" (input)="saveChanges()" onfocus="this.select();"
                    (focus)="focusField('modifiedHead')">
                    <span class="input-group-addon units" [innerHTML]="settings.distanceMeasurement | settingsLabel"></span>
                </div>
                <span class="alert-danger pull-right small"
                    *ngIf="pumpSystemCurveForm.controls.modifiedHead.invalid && !pumpSystemCurveForm.controls.modifiedHead.pristine">
                    <span *ngIf="pumpSystemCurveForm.controls.modifiedHead.errors.required">Value required.</span>
                    <span *ngIf="pumpSystemCurveForm.controls.modifiedHead.errors.min">Value can't be less than
                        {{pumpSystemCurveForm.controls.modifiedHead.errors.min.min}}.</span>
                    </span>
                </div>
            </div>
                <div> 
                <div *ngIf="pumpSystemCurveForm.controls.modificationMeasurementOption.value == 0" class="row">
                    <div class="col-6">
                      <label class="small">Modification Head</label>
                    </div>
                    <div class="col-6 text-center small bold">
                      <span *ngIf="modificationEquipment.head">{{modificationEquipment.head | number: '1.0-2'}} </span>
                      <span *ngIf="!modificationEquipment.head">&mdash; &mdash; </span>
                    <span class="ml-1" [innerHTML]="settings.distanceMeasurement | settingsLabel"></span>
                    </div>
                </div>
                <div *ngIf="pumpSystemCurveForm.controls.modificationMeasurementOption.value == 1" class="row" >
                    <div class="col-6">
                        <label class="small">Modification Flow</label>
                    </div>
                    <div class="col-6 text-center small bold">
                      <span *ngIf="modificationEquipment.flow">{{modificationEquipment.flow | number: '1.0-2'}} </span>
                      <span *ngIf="!modificationEquipment.flow">&mdash; &mdash; </span>
                      <span class="ml-1" [innerHTML]="settings.flowMeasurement | settingsLabel"></span>
                    </div>
                </div>
                <div *ngIf="displaySpeed" class="row" >
                    <div class="col-6">
                        <label class="small">Modification Speed</label>
                    </div>
                    <div class="col-6 text-center small bold">
                      <span *ngIf="modificationEquipment.speed">{{modificationEquipment.speed | number: '1.0-0'}} </span>
                      <span *ngIf="!modificationEquipment.speed">&mdash; &mdash; </span>
                      <span class="ml-1">rpm</span>
                    </div>
                </div>
                <div *ngIf="!displaySpeed" class="row">
                    <!--  Speed and diameter represent the same calculation. -->
                    <div class="col-6">
                        <label class="small">Modification Diameter</label>
                    </div>
                    <div class="col-6 text-center small bold">
                      <span *ngIf="modificationEquipment.speed" >{{modificationEquipment.speed | number: '1.0-0'}} </span>
                      <span *ngIf="!modificationEquipment.speed" >&mdash; &mdash; </span>
                      <span class="ml-1">
                          <span *ngIf="settings.fanFlowRate == 'ft3/min'">
                            in
                          </span>
                          <span *ngIf="settings.fanFlowRate != 'ft3/min'">
                            cm
                          </span>
                      </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

</form>