<form class="pl-3 pr-3" [formGroup]="form" #formElement>
    <div class="form-group">
        <label for="{{controlIds.towerType}}">Tower Type</label>
        <select class="form-control" id="{{controlIds.towerType}}" formControlName="towerType"
            (focus)="focusField('towerType')">
            @for (towerType of towerTypes; track towerType.value) {
            <option [ngValue]="towerType.value">{{ towerType.name }}</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="{{controlIds.numberOfTowers}}">Number of Towers</label>
        <div class="input-group">
            <input name="numberOfTowers" type="number" step="1" class="form-control" id="{{controlIds.numberOfTowers}}"
                formControlName="numberOfTowers" (focus)="focusField('numberOfTowers')">
        </div>
        <app-form-control-errors [control]="numberOfTowers"></app-form-control-errors>
    </div>

    <div class="form-group">
        <label for="{{controlIds.towerSizeMetric}}">Tower Size Metric</label>
        <select class="form-control" id="{{controlIds.towerSizeMetric}}" formControlName="towerSizeMetric"
            (focus)="focusField('towerSizeMetric')">
            @for (towerSizeMetric of towerSizeMetrics; track towerSizeMetric.value) {
            <option [ngValue]="towerSizeMetric.value">{{ towerSizeMetric.name }}</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="{{controlIds.towerSize}}">Tower Size</label>
        <div class="input-group">
            <input name="towerSize" type="number" step="any" class="form-control" id="{{controlIds.towerSize}}"
                formControlName="towerSize" (focus)="focusField('towerSize')">
            <app-input-unit
                [defaultUnit]="towerSizeMetric.value === TowerSizeMetrics.Tonnes ? 'tonnes' : 'hp'"></app-input-unit>
        </div>
        <app-form-control-errors [control]="towerSize"></app-form-control-errors>
    </div>

    <div class="form-group">
        <label for="{{controlIds.usesFreeCooling}}">Uses Free Cooling</label>
        <select class="form-control" id="{{controlIds.usesFreeCooling}}" formControlName="usesFreeCooling"
            (focus)="focusField('usesFreeCooling')">
            <option [ngValue]="true">Yes</option>
            <option [ngValue]="false">No</option>
        </select>
    </div>

    @if (usesFreeCooling.value === true) {
    <div class="form-group">
        <label for="{{controlIds.isHEXRequired}}">Is HEX Required</label>
        <select class="form-control" id="{{controlIds.isHEXRequired}}" formControlName="isHEXRequired"
            (focus)="focusField('isHEXRequired')">
            <option [ngValue]="true">Yes</option>
            <option [ngValue]="false">No</option>
        </select>
    </div>

        @if (isHEXRequired.value === true) {
        <div class="form-group">
            <label for="{{controlIds.HEXApproachTemp}}">HEX Approach Temp</label>
            <div class="input-group">
                <input name="HEXApproachTemp" type="number" step="any" class="form-control"
                    id="{{controlIds.HEXApproachTemp}}" formControlName="HEXApproachTemp"
                    (focus)="focusField('HEXApproachTemp')">
                <app-input-unit [settings]="settings()" [imperialUnit]="TEMPERATURE_HTML.imperial"
                    [metricUnit]="TEMPERATURE_HTML.metric"></app-input-unit>
            </div>
            <app-form-control-errors [control]="HEXApproachTemp"></app-form-control-errors>
        </div>
        }
    }

    <div class="form-group">
        <label for="{{controlIds.fanType}}">Fan Type</label>
        <select class="form-control" id="{{controlIds.fanType}}" formControlName="fanType"
            (focus)="focusField('fanType')">
            @for (fanType of fanTypes; track fanType.value) {
            <option [ngValue]="fanType.value">{{ fanType.name }}</option>
            }
        </select>
    </div>

</form>