<div class="data-setup d-flex flex-column justify-content-center scroll-item">
    <div *ngIf="explorerData.datasets" class="w-100 px-5 mt-3">
        <div class="text-left alert alert-info small my-2 mx-auto p-0">
            <div class="p-1">
                <ul class="m-2">
                    <li>Time stamps are required for Day Type analysis.
                        Advance ahead if you don't require Day Type analysis.
                    </li>
                    <ul class="pl-3">
                        <li>Mark "Is Date" if the column has both a date and a time</li>
                        <li>Mark "Is Time" if the column is a time</li>
                    </ul>
                </ul>
            </div>
        </div>

        <div class="py-2 px-0 mx-auto" *ngIf="selectedDataSet">
            <div *ngIf="explorerData.datasets.length > 1" class="d-flex flex-row mb-2">
                <input class="mb-0 mt-1" type="checkbox" id="applyToAll" [(ngModel)]="applyToAll" (change)="updateExplorerData()">
                <label for="applyToAll">Apply my selections for all datasets</label>
            </div>
            <ul class="nav nav-tabs">
                <li class="nav-item" *ngFor="let dataset of explorerData.datasets; let index=index;">
                    <a class="nav-link" [ngClass]="{'active': selectedDataSetIndex == index}"
                        (click)="setSelectedDataSet(index)">
                        <span class="p-2">
                            {{dataset.csvName}}
                        </span>
                    </a>
                </li>
            </ul>


            <div class="m-3 preview-data scroll-item">
                <table class="table table-sm">
                    <tbody>
                        <tr>
                            <td class="bold">Column Name
                                
                            </td>
                            <td class="bold">Includes Date</td>
                            <td><span class="bold mr-1">Includes Time Only</span>
                            <span class="ml-3 pull-right">
                                <span class="tooltip-icon fa fa-question-circle" (mouseenter)="displayTooltipHover()" 
                                (mouseleave)="hideTooltipHover()" (click)="toggleClickTooltip()"></span>
                            </span>
                            <span class="detail-tooltip-box" *ngIf="showTooltipHover || showTooltipClick"
                                (mouseenter)="displayTooltipHover(true)" (mouseleave)="hideTooltipHover()">
                                <div class="detail-tooltip down"><span class="detail-tooltip-arrow tooltip-arrow-up"></span>
                                    <div class="p-2">
                                        <ul class="pl-2">
                                            <li>
                                                <span class="bold">Includes Date</span> - Column contains a date and time <span class="bold">or</span> a date only.
                                             </li>
                                             <li>
                                                <span class="bold">Includes Time Only</span> - Column contains a time only.
                                             </li>
                                            <li>
                                               <span class="bold">Example date/time stamp formats</span>
                                               <ul class="">
                                                <li>5/1/2022 1:00</li>
                                                <li>5/1/2022 5:01:00 AM</li>
                                                <li>5:01:00 AM</li>
                                               </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </span>
                        </td>
                        </tr>
                        <ng-container *ngFor="let field of selectedDataSet.fields; let i = index;">
                            <tr *ngIf="field.useField">
                                <td>{{field.fieldName}}</td>
                                <td>
                                    <input type="checkbox" id="{{'isDateField'+i}}" [(ngModel)]="field.isDateField"
                                        [disabled]="dataExists == true || (selectedDataSet.hasDateField && !field.isDateField) || field.isTimeField"
                                        (change)="updateDateField()">
                                </td>
                                <td>
                                    <input type="checkbox" id="{{'isTimeField'+i}}" [(ngModel)]="field.isTimeField"
                                        [disabled]="dataExists == true || (selectedDataSet.hasTimeField && !field.isTimeField) || field.isDateField"
                                        (change)="updateTimeField()">
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>

            </div>
            <div class="d-block">
                <hr>
            </div>
            <div *ngIf="!explorerData.isExample" class="form-group my-1">
                <div class="alert alert-info text-left small">
                    If your data was taken in LESS than one minute intervals, please specify the time interval below.
                </div>
                <div class="mx-2">
                    <label>Time Interval in Seconds</label>
                    <select class="form-control" name="dataCollectionInterval" 
                    [disabled]="!selectedDataSet.hasDateField && !selectedDataSet.hasTimeField" 
                    (change)="setSecondsInterval(option)" 
                    [(ngModel)]="selectedDataSet.dataCollectionInterval">
                        <option  *ngFor="let option of secondsIntervalOptions" [ngValue]="option">
                            {{option}}</option>
                        </select>
                </div>
            </div>
        </div>
    </div>
</div>